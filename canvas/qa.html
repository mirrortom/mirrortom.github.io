<!DOCTYPE html><html lang=en><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1.0,user-scalable=no"><link rel=apple-touch-icon sizes=180x180 href=/apple-touch-icon.png><link rel=icon type=image/png sizes=32x32 href=/favicon-32x32.png><link rel=icon type=image/png sizes=16x16 href=/favicon-16x16.png><link rel=manifest href=/site.webmanifest><link rel=mask-icon href=/safari-pinned-tab.svg color=#5bbad5><meta name=msapplication-TileColor content=#da532c><meta name=theme-color content=#ffffff><title>canvas问题 | canvas-demo | Mirror Space</title><link href=/mirrorui/mirrorui.css rel=stylesheet><link href=/mirroricon/mirroricon.css rel=stylesheet><link href=/asset/css/blog.css rel=stylesheet><div class=layout><div class=layout-part1></div><div class="layout-part2 layout-doc"><div id=page_content><h1>canvas相关问题</h1><p>参考书: &lt;&lt;H5核心技术图形动画与游戏开发(David Geary)>><h3>画布尺寸</h3><p>4页<p>canvas使用style="width:500px"设置和在元素上设置width=500,效果不一样.<p>因为元素有两套尺寸,一个是canvas元素尺寸,一个是绘图表面尺寸.使用style时,只修改元素尺寸.使用width时,都修改了<p>何时修改尺寸,例如下述代码.要先修改尺寸,再设置其它属性比如字体之类的.否则结果可能意想不到.<pre>
<strong>ctx.canvas.width = 600;</strong>
    ctx.font = '16px serial';
</pre><h3>默认坐标系统</h3><p>46页<p>以左上角为顶点,向右为X轴,向下为Y轴,默认大小为 300 X 150</p><canvas id=canvas1></canvas><h3>物体碰撞</h3><p>42页<p>当某个运动的物体同某个静止的物体发生碰撞时,如果我们需要让运动的物体被静止物体弹开....,通过计算两个向量的点积<p>43页<p>等式推导,用于编程时未知的量<h3>HSL颜色值</h3><p>51页<p>类似rgb(红,绿,蓝),hsl在表示形式上也是这种,hsl(颜色,饱和度,亮度).颜色值在一个圆形的区域中选择,0(360)度,表示红色,120度是绿色,240是蓝色<p>饱和度范围(100%~0),亮度范围(100%~0),这种颜色格式有点像调整显示器的饱和度和亮度.</p><canvas id=canvas2></canvas><h3>HSB颜色值</h3><p>&lt;&lt;设计配色基础>> 28页 色相环.<p>H(Hue)是色相,S(Saturation)是饱和度(Brightness)是透明度.这个方案和HSL原理类似,选一个色相,再调整浓度和透明度.<p>下图的色相环用于说明颜色是由3种基本颜色组成的,(可见)光的3原色:红绿蓝.不是书中的3基色(红黄蓝).使用的是RGB颜色值.</p><canvas id=canvas3></canvas><p>3原色相邻叠加得到的6色,再叠加得到12色,类推可以得到有限个颜色.<p>以下的叠加方法是:将相邻的颜色的RGB值相加再除以2.<p>例如:红色#FF0000绿色#00ff00,(R+R)/2 (G+G)/2 (B+B)/2,先得到#FFFF00,除以2得到#808000</p><canvas id=canvas4></canvas><br><br><script src=/cavlib/cavlib.js></script><script>function meregColor(n){let i=[];for(var t=0;t<n.length;t++){let r=n[t],u=t+1==n.length?n[0]:n[t+1],s=parseInt(r.substr(1,2),16)+parseInt(u.substr(1,2),16),h=parseInt(r.substr(3,2),16)+parseInt(u.substr(3,2),16),c=parseInt(r.substr(5,2),16)+parseInt(u.substr(5,2),16),f=Math.ceil(s/2).toString(16),e=Math.ceil(h/2).toString(16),o=Math.ceil(c/2).toString(16),l="#"+(f.length<2?"0"+f:f)+(e.length<2?"0"+e:e)+(o.length<2?"0"+o:o);i.push(r);i.push(l)}return i}function test4(){var t,i;let s=cavlib("canvas4").style(),n=s.ctx;n.canvas.width=500;n.font="16px serial";let r=meregColor(["#ff0000","#00ff00","#0000ff"]),u=meregColor(r),f=meregColor(u),h=meregColor(f),e=[r,u,f,h],o=Math.PI/180;for(t=0;t<e.length;t++){let s=e[t],u=s.length,f=360/u;n.save();n.translate(60+t*120,80);n.rotate(-Math.PI/2);let r=-f/2;for(i=0;i<u;i++)n.beginPath(),n.moveTo(0,0),n.fillStyle=s[i],n.arc(0,0,50,r*o,(r+f)*o),n.fill(),r=r+f;n.restore();n.fillText(u+"色",50+t*120,20)}}function test3(){let e=cavlib("canvas3").style(),n=e.ctx;n.canvas.width=150;n.font="16px serial";let i=["#ff0000","#00ff00","#0000ff"],f=Math.PI/180,r=360/i.length,t=-r/2;n.save();n.translate(75,80);n.rotate(-Math.PI/2);for(var u=0;u<i.length;u++)n.beginPath(),n.moveTo(0,0),n.fillStyle=i[u],n.arc(0,0,50,t*f,(t+r)*f),n.fill(),t=t+r;n.restore();n.fillText("正上方0度,顺时针",10,20)}function test2(){var t;let u=cavlib("canvas2").style(),n=u.ctx;n.canvas.width=500;n.font="18px serial";n.fillText("HSL(0~360,100%,50%)",20,20);let i=(t,i)=>{n.beginPath(),n.moveTo(0,0),n.fillStyle=`HSL(${t},100%,50%)`,n.arc(0,0,50,i*(Math.PI/180),(i+1)*(Math.PI/180)),n.fill()};for(n.save(),n.translate(60,80),t=0;t<119;t++)i(t,t),i(120+t,120+t),i(240+t,240+t);n.restore();n.save();n.translate(230,10);let r=(t,i,r,u,f)=>{n.beginPath(),n.moveTo(0,0),n.fillStyle=`RGB(${t},${i},${r})`,n.fillRect(u,f,1,20)};for(t=0;t<255;t++)r(t,0,0,t,15),r(0,t,0,t,60),r(0,0,t,t,105);n.fillStyle="black";n.fillText("R(0~255,0,0)",50,10);n.fillText("G(0,0~255,0)",50,55);n.fillText("B(0,0,0~255)",50,100)}function test1(){var t;let i=cavlib("canvas1").style(),n=i.ctx;for(n.canvas.width=400,n.canvas.height=210,n.font="16px serial",n.translate(30,30),i.lineArrow([0,0,300,0]),n.fillText("X",320,10),t=0;t<7;t++)n.fillText(t*50,t*50-10,-10),n.moveTo(t*50,0),n.lineTo(t*50,10),n.stroke();for(i.lineArrow([0,0,0,150]),n.fillText("Y",-5,175),t=1;t<4;t++)n.fillText(t*50,-30,t*50),n.moveTo(0,t*50),n.lineTo(10,t*50),n.stroke();n.moveTo(150,50);n.lineTo(75,125);n.lineTo(225,125);n.closePath();n.stroke()}test1();test2();test3();test4()</script></div><div class=nav-page-inside><h6 class=text-center>本文内容</h6><div class=layout-v id=navOfInPage></div></div></div></div><script src=/asset/js/mainmenu.js></script><script src=/asset/js/navinpage.js></script>