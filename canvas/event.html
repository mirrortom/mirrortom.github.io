<!DOCTYPE html><html lang=en><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1.0,user-scalable=no"><link rel=apple-touch-icon sizes=180x180 href=/apple-touch-icon.png><link rel=icon type=image/png sizes=32x32 href=/favicon-32x32.png><link rel=icon type=image/png sizes=16x16 href=/favicon-16x16.png><link rel=manifest href=/site.webmanifest><link rel=mask-icon href=/safari-pinned-tab.svg color=#5bbad5><meta name=msapplication-TileColor content=#da532c><meta name=theme-color content=#ffffff><title>事件 | canvas-demo | Mirror Space</title><link href=/mirrorui/mirrorui.css rel=stylesheet><link href=/mirroricon/mirroricon.css rel=stylesheet><link href=/asset/css/blog.css rel=stylesheet><div class=layout><div class=layout-part1></div><div class=layout-part2><h1>鼠标,键盘,触摸</h1><p>浏览器鼠标坐标位置换算到画布windowToCanvas(),用事件对象得到的坐标减去canvas元素的top,left值<p>下方画布,按住拖动可画线.按键盘则打印出按键字符(支持打印出a-z小写)</p><a class=btn onclick=clearDraw()>清空画布</a> <canvas id=canvas1><h3>不支持canvas</h3></canvas><p><span class="label text-danger xl" id=px></span><span class="label text-danger xl" id=py></span><h4>鼠标画线实现关键</h4><p>鼠标按住画线: 监听鼠标按下(mousedown),鼠标移动(mousemove)这两个事件,按下事件中判断是左键按下时,调用moveTo(),<p>移动事件中,同样要判断移动同时是按住左键的,调用lineTo().这样就能实现鼠标画线<h4>按键盘打字实现关键</h4><p>监听键盘keyup事件,这是在按键释放后触发的.由于canvas不能监听键盘事件,所以要在window或document对象上监听<p>监听到事件后,判断键值是否为26个字母对应键值,然后调用fillText()画出对应字母</p><script src=/cavlib/cavlib.js></script><script>function clearDraw(){let n=cavlib("canvas1").style(),t=n.ctx;t.clearRect(0,0,300,150)}function test1(){let i=document.querySelector("#canvas1"),r=cavlib("canvas1").style(),t=r.ctx,u=document.querySelector("#px"),f=document.querySelector("#py"),n={x:0,y:0};i.addEventListener("mousemove",r=>{n=windowToCanvas(i,r.x,r.y),u.innerHTML="X: "+n.x,f.innerHTML="Y: "+n.y,r.buttons==1&&(t.lineTo(n.x,n.y),t.stroke())});i.addEventListener("mousedown",r=>{n=windowToCanvas(i,r.x,r.y),r.buttons==1&&(t.beginPath(),t.moveTo(n.x,n.y))});window.document.addEventListener("keyup",i=>{i.keyCode>=65&&i.keyCode<=90&&(t.fillText(i.key,n.x,n.y),n.x+=5)})}function windowToCanvas(n,t,i){let r=n.getBoundingClientRect();return{x:t-r.left,y:i-r.top}}test1()</script></div></div><script src=/asset/js/mainmenu.js></script>