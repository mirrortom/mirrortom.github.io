<!DOCTYPE html><html lang=en><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1.0"><link href=/mirrorui/mirrorui.css rel=stylesheet><link href=/mirroricon/mirroricon.css rel=stylesheet><title>clearrect | canvas文档整理 | Mirror Space</title><style>.page{display:grid;grid-template-columns:210px auto}.mainmenubox{position:sticky;top:0;width:94%;max-height:100vh;overflow-x:hidden;overflow-y:auto}</style><div class=page><div class=mainmenubox id=mainmenubox></div><div class=pd-20><h2>clearRect(x,y,width,height)</h2><p>清空矩形区域内的所有像素<pre class="bg-gray pd-tb-10">
  ctx.clearRect(x,y,width,height);
</pre><h4>参数</h4><p><label class="label danger">x</label> <small>Number</small> 矩形左上顶点x坐标<p><label class="label danger">y</label> <small>Number</small> 矩形左上顶点y坐标<p><label class="label danger">width</label> <small>Number</small> 矩形宽度<p><label class="label danger">height</label> <small>Number</small> 矩形高度</p><br><h4>测验</h4><p>填充整个画布,再清除一块区域.这个区域是没有像素的,下图被清区域显示的灰色,是因为这个canvas背景设为灰色了</p><canvas id=canvas1></canvas><h3>应用</h3><p>做canvas动画效果时,需要用到清空画布.一个简单的小点位移动画,可以视为在一个变化的x,y坐标上绘制<p>这个小点,每绘制之前都调用此方法清空画布,以清空之前画的小点.这样看起来,小点是在运动中.<p>以下是一个小点,出现在随机坐标上.每一秒钟出现一次.</p><canvas id=canvas2></canvas><p>&lt;&lt;H5核心技术图形动画与游戏开发(David Geary)>> (49页)<p>将指定矩形与当前剪辑区域相交范围内的所有像素清除,默认情况下剪辑区域就是canvas大小,清除像素是指将其颜色设置为全透明的黑色</p><script src=/cavlib/cavlib.js></script><script>function test1(){let t=cavlib("canvas1").style(),n=t.ctx;n.fillStyle="red";n.fillRect(0,0,300,150);n.clearRect(50,50,100,60)}function test2(){let i=cavlib("canvas2").style(),n=i.ctx;n.fillStyle="red";let t=()=>{n.clearRect(0,0,300,150);n.beginPath();let i=nextInt(1,300),r=nextInt(1,150);n.arc(i,r,5,0,Math.PI*2);n.fill();setTimeout(()=>{requestAnimationFrame(t)},1e3)};requestAnimationFrame(t)}function nextInt(n,t){let i=Math.random()*(t-n);return Math.floor(i)+n}test1();test2()</script></div></div><script src=/asset/js/canvasapimenu.js></script>