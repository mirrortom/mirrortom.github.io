<!DOCTYPE html><html lang=en><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1.0"><link href=/mirrorui/mirrorui.css rel=stylesheet><title>toDataURL | canvas文档整理 | Mirror Space</title><style>.page{display:grid;grid-template-columns:210px auto}.mainmenubox{position:sticky;top:0;width:94%;max-height:100vh;overflow-x:hidden;overflow-y:auto}</style><div class=page><div class=mainmenubox id=mainmenubox></div><div class=pd-20><h2>toDataURL(type,quality)</h2><p>返回一个dataUrl地址,可用于img标签的src属性<pre class="bg-gray pd-tb-10">
  canvas.toDataURL(type,quality)
</pre><br><h4>参数</h4><p><label class="label danger">type</label> <small>String</small> 默认值是image/png,指示图片格式.其它值例如:image/jpeg<p><label class="label danger">quality</label> <small>Number</small> 设置jpeg的质量0~1.0之间的值</p><br><h4>测验</h4><p>获取下图的url地址,设置到右边img元素的src属性<p>所谓数据url就是那base64字符串,所以可用于src属性<div class=grids><canvas id=canvas1></canvas><img id=img1></div><p>使用参数image/jpeg,图片质量0.1<p>由于jpeg不保留透明度,所以图像背景成黑的了.设置了0.1的质量,所以图片看起来比较差<div class=grids><canvas id=canvas2></canvas><img id=img2></div><script src=/jslib/cavlib.js></script><script>function test2(){var n;let i=cavlib("canvas2").style(),t=i.ctx;for(t.lineWidth=5,n=0;n<10;n++){t.beginPath();let i=randInt(0,256),r=randInt(0,256),u=randInt(0,256);t.strokeStyle=`rgb(${i},${r},${u})`;t.rect(14*n,10*n,100,50);t.stroke()}for(n=10;n>0;n--){t.beginPath();let i=randInt(0,256),r=randInt(0,256),u=randInt(0,256);t.strokeStyle=`rgb(${i},${r},${u})`;t.rect(14*n,100-10*n,100,50);t.stroke()}let r=document.querySelector("#canvas2"),u=r.toDataURL("image/jpeg",.1),f=document.querySelector("#img2");f.src=u}function test1(){let i=cavlib("canvas1").style(),n=i.ctx;n.moveTo(300,0);n.lineTo(0,150);n.stroke();n.translate(150,75);n.lineWidth=5;n.transform(1,Math.PI/6,0,1,0,0);for(var t=0;t<10;t++){n.beginPath();let i=randInt(0,256),r=randInt(0,256),u=randInt(0,256);n.strokeStyle=`rgb(${i},${r},${u})`;n.arc(0,0,7*t,0,Math.PI*2);n.stroke()}let r=document.querySelector("#canvas1"),u=r.toDataURL(),f=document.querySelector("#img1");f.src=u}function randInt(n,t){let i=Math.random()*(t-n);return Math.floor(i)+n}test1();test2()</script></div></div><script src=/asset/js/canvasapimenu.js></script>