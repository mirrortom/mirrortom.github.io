<div class=doc-page><h2>transform(a, b, c, d, e, f)</h2><p>使用矩阵多次叠加当前变换的方法,矩阵由方法的参数进行描述.你可以缩放,旋转,移动和倾斜上下文.<pre class="bg-gray pd-tb-10">
  ctx.transform(1, 0, 0, 1, 0, 0)
</pre><br><h4>参数</h4><p><label class="label danger">a</label> <small>Number</small> 水平缩放 (m11)<p><label class="label danger">b</label> <small>Number</small> 水平倾斜 (m12)<p><label class="label danger">c</label> <small>Number</small> 垂直倾斜 (m21)<p><label class="label danger">d</label> <small>Number</small> 垂直缩放 (m22)<p><label class="label danger">e</label> <small>Number</small> 水平移动 (dx)<p><label class="label danger">f</label> <small>Number</small> 垂直移动 (dy)</p><br><h4>测验</h4><p>可将画布看做矩阵,通过修改矩阵实现对绘画的缩放,旋转,移动,倾斜.<p>数学中的矩阵概念是m*n个数排列成m行n列,叫m x n矩阵.矩阵有矩阵运算,加,减,乘,转置等等<p>这个方法通过调整矩阵值来影响canvas绘画行为<p>参数对应矩阵如下.</p><canvas id=canvas1></canvas><p>a=2,水平缩放<p>本来是70*50的长方形,缩放后变成140*50.这个方法<a class=goto onclick='mainmenugoto("scale")'>scale()</a>能达到同样效果.<p>那为什么还要制作这个方法呢,因为此方法可以将几种变换做累加效果,如果只是需要其中一种变化效果,那调用相应方法就好<p>当需要做复杂变化时,用这个方法就非常实用.多种变换累加,能得到比较奇特的效果.前提是数学要好</p><canvas id=canvas2></canvas><p>b=Math.PI/6,水平倾斜30度<p>看起来这种水平倾斜好像是画布旋转了30度,但其实这误会了.这种变换是仿射变换,算法是矩阵乘法<p>可以这样认为,倾斜前,X,Y轴是互相垂直的,画出的矩形的四个角是都是直角.而水平倾斜30度之后,<p>x轴不在是水平的,而是有30度倾角,这样一来,就与y轴(不变)不再垂直.那么在这种坐标系内画出的矩形,<p>看起来是个平行四边形,事实上看就是平等四边形.可以认为坐标系扭曲了.<p>左边是正常方形,右边是水平倾斜后的样子.</p><canvas id=canvas3></canvas><p>c=Math.PI/6,垂直倾斜30度<p>同理,垂直倾斜可认为是y轴倾斜了30度,这种坐标系中画出来的矩形就成这种样子<p>左边是正常方形,右边是垂直倾斜后的样子.</p><canvas id=canvas4></canvas><p>d=2,垂直缩放<p>与水平缩放相似,垂直方向上变成了2倍</p><canvas id=canvas5></canvas><p>e=20,(dx)水平移动距离<p>水平移动的效果与<a class=goto onclick='mainmenugoto("translate")'>translate()</a>方法效果一样,改变了坐标原点</p><canvas id=canvas6></canvas><p>f=20,(dy)垂直移动距离</p><canvas id=canvas7></canvas><p>如果调用了此方法,修改了坐标系,那么后续的绘画都将在新坐标系内进行.如果要还原坐标系,最好在变化前调用<a class=goto onclick='mainmenugoto("save")'>save()</a><p>完成后调用<a class=goto onclick='mainmenugoto("restore")'>restore()</a>.画布默认参数值是(1, 0, 0, 1, 0, 0)<p>多次调用会有累加效果,如果不希望这种效果,可以尝试使用,<a class=goto onclick='mainmenugoto("setTransform")'>setTransform()</a><p>先垂直倾斜30度,再垂直倾斜30度.可见右下的四边形比右上的要更扁</p><canvas id=canvas8></canvas><br></div><script>function test8(){let t=cavlib("canvas8").style(),n=t.ctx;n.moveTo(150,0);n.lineTo(150,150);n.stroke();n.fillRect(5,5,70,50);n.transform(1,0,Math.PI/6,1,150,0);n.fillRect(5,5,70,50);n.transform(1,0,Math.PI/6,1,0,70);n.fillRect(5,5,70,50)}function test7(){let t=cavlib("canvas7").style(),n=t.ctx;n.moveTo(150,0);n.lineTo(150,150);n.stroke();n.fillRect(5,5,70,50);n.save();n.translate(150,0);n.transform(1,0,0,1,0,50);n.fillRect(0,0,70,50);n.restore()}function test6(){let t=cavlib("canvas6").style(),n=t.ctx;n.moveTo(150,0);n.lineTo(150,150);n.stroke();n.fillRect(5,5,70,50);n.save();n.translate(150,0);n.transform(1,0,0,1,50,0);n.fillRect(0,0,70,50);n.restore()}function test5(){let t=cavlib("canvas5").style(),n=t.ctx;n.moveTo(150,0);n.lineTo(150,150);n.stroke();n.fillRect(5,5,70,50);n.save();n.translate(150,0);n.transform(1,0,0,2,0,0);n.fillRect(5,5,70,50);n.restore()}function test4(){let t=cavlib("canvas4").style(),n=t.ctx;n.moveTo(150,0);n.lineTo(150,150);n.stroke();n.fillRect(10,10,80,80);n.beginPath();n.moveTo(0,0);n.lineTo(140,0);n.moveTo(0,0);n.lineTo(0,140);n.strokeStyle="blue";n.stroke();n.font="18px serial";n.fillText("(x)",100,20);n.fillText("(y)",10,120);n.stroke();n.save();n.translate(150,0);n.transform(1,0,Math.PI/6,1,0,0);n.fillRect(10,10,80,80);n.moveTo(0,0);n.lineTo(150,0);n.moveTo(0,0);n.lineTo(0,150);n.strokeStyle="blue";n.stroke();n.font="18px serial";n.fillText("(x)",100,20);n.fillText("(y)",10,120);n.restore()}function test3(){let t=cavlib("canvas3").style(),n=t.ctx;n.moveTo(150,0);n.lineTo(150,150);n.stroke();n.fillRect(10,10,80,80);n.moveTo(0,0);n.lineTo(140,0);n.moveTo(0,0);n.lineTo(0,140);n.strokeStyle="blue";n.stroke();n.font="18px serial";n.fillText("(x)",100,20);n.fillText("(y)",10,120);n.stroke();n.save();n.beginPath();n.fillStyle="red";n.translate(150,0);n.transform(1,Math.PI/6,0,1,0,0);n.fillRect(10,10,80,80);n.moveTo(0,0);n.lineTo(150,0);n.moveTo(0,0);n.lineTo(0,150);n.strokeStyle="blue";n.stroke();n.font="18px serial";n.fillText("(x)",100,-10);n.fillText("(y)",10,120);n.restore()}function test2(){let t=cavlib("canvas2").style(),n=t.ctx;n.moveTo(150,0);n.lineTo(150,150);n.stroke();n.fillRect(5,5,70,50);n.save();n.translate(150,0);n.transform(2,0,0,1,0,0);n.fillRect(2.5,2.5,70,50);n.restore()}function test1(){let t=cavlib("canvas1").style(),n=t.ctx;n.moveTo(30,20);n.lineTo(30,130);n.moveTo(150,20);n.lineTo(150,130);n.stroke();n.font="28px serial";n.fillText("a",40,45);n.fillText("c",80,45);n.fillText("e",120,45);n.fillText("b",40,85);n.fillText("d",80,85);n.fillText("f",120,85);n.fillText("0",40,125);n.fillText("0",80,125);n.fillText("1",120,125)}test1();test2();test3();test4();test5();test6();test7();test8()</script>