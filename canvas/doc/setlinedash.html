<!DOCTYPE html><html lang=en><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1.0"><link href=/mirrorui/mirrorui.css rel=stylesheet><title>setLineDash | canvas文档整理 | Mirror Space</title><style>.page{display:grid;grid-template-columns:210px auto}.mainmenubox{position:sticky;top:0;width:94%;max-height:100vh;overflow-x:hidden;overflow-y:auto}</style><div class=page><div class=mainmenubox id=mainmenubox></div><div class=pd-20><h2>setLineDash(segments)</h2><p>在填充线时使用虚线模式. 它使用一组值来指定描述模式的线和间隙的交替长度.<pre class="bg-gray pd-tb-10">
  ctx.setLineDash([5,15])
</pre><br><h4>参数</h4><p><label class="label danger">segments</label> <small>Number</small> 一个Array数组一组描述交替绘制线段和间距(坐标空间单位)长度的数字.</p><br><h4>测验</h4><p>传数组[5,10],从(5,50)到(290,50)画一条线,结果是一条虚线<p>研究表明,虚线的实线部分长度为5,间隔部分长度为10.也就是说数组1位为实线长度,2位为间隔长度<p>为证实推测,将数组修改为[5,30]再画一条虚线.结果间隔确实变成30了.</p><canvas id=canvas1></canvas><p>画虚线前要使用save()保存状态,画完后再restore(),为了避免干扰画其它的路径.<p>下面画一个虚线的圆,依然使用[5,10]</p><canvas id=canvas2></canvas><p>如果传入空数组[],结果就是实线.如果传入1个值的数组[5],会如何.结果是实线与间隔都一样长.</p><canvas id=canvas3></canvas><p>数组不仅只有1或2个值,[5,10,20],这样的参数会怎么样.看下图会发现第1个实线段是5,第1个间隔是10,第2个实线段是20<p>接着第2个间隔是5,第3个实线段是10,第3个间隔是20.这表明虚线的周期交替是按数组的3个元素为一个周期,且是以实线段开始.</p><canvas id=canvas4></canvas><p>[5,8,13,21],画这样一条虚线.那么虚线的交替情况应该是:实(3),间(5)实(8),间(13)实(21)<p>做为一个周期.结果正是如此,看下图</p><canvas id=canvas5></canvas><h3>规律</h3><p>以上研究说明,虚线的一个(实线与间隔)交替周期由数组位数决定.而且有个现象是,数组长度为偶数时,每个周期的图像是一样的.<p>而数组长度为奇数时(长度为1除外),每过一个周期,实线部分会变成间隔,间隔会变成实线<p>数组长度为1时,是一条线段与间隔相同的均匀虚线.</p><br><script src=/jslib/cavlib.js></script><script>function test5(){let t=cavlib("canvas5").style(),n=t.ctx;n.save();n.beginPath();n.setLineDash([5,8,13,21]);n.moveTo(5,50);n.lineTo(290,50);n.stroke();n.restore();n.beginPath();n.strokeStyle="red";n.moveTo(52,10);n.lineTo(52,100);n.moveTo(99,10);n.lineTo(99,100);n.stroke()}function test4(){let t=cavlib("canvas4").style(),n=t.ctx;n.save();n.beginPath();n.setLineDash([5,10,20]);n.moveTo(5,50);n.lineTo(290,50);n.stroke();n.restore();n.beginPath();n.strokeStyle="red";n.moveTo(40,10);n.lineTo(40,100);n.moveTo(75,10);n.lineTo(75,100);n.stroke()}function test3(){let t=cavlib("canvas3").style(),n=t.ctx;n.save();n.beginPath();n.setLineDash([]);n.moveTo(5,50);n.lineTo(290,50);n.stroke();n.restore();n.beginPath();n.strokeStyle="blue";n.setLineDash([5]);n.moveTo(5,100);n.lineTo(290,100);n.stroke()}function test2(){let t=cavlib("canvas2").style(),n=t.ctx;n.setLineDash([5,10]);n.arc(150,70,50,0,Math.PI*2);n.stroke()}function test1(){let t=cavlib("canvas1").style(),n=t.ctx;n.beginPath();n.setLineDash([5,10]);n.moveTo(5,50);n.lineTo(290,50);n.stroke();n.beginPath();n.setLineDash([5,30]);n.moveTo(5,100);n.lineTo(290,100);n.stroke();n.fillText("30",55,120)}test1();test2();test3();test4();test5()</script></div></div><script src=/asset/js/canvasapimenu.js></script>