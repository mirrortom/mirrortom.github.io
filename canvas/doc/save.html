<div class=doc-page><h2>save()</h2><p>保存当前上下文状态<pre>
  ctx.save()
</pre><br><h4>测验</h4><p>先save(),然后改变原点到(20,30)再旋转30度,画一个矩形,再<a class=goto onclick='mainmenugoto("restore")'>restore()</a>,画一个矩形<p>作用就是保存当前的绘画上下文状态,然后再还原这个状态.例如,为了画一处特点的图像,需要修改原点或角度(状态),<p>等画完后再调整回来.这时就需要使用save()和restore().</p><canvas id=canvas1></canvas><p>所谓状态,可认为是设定的一系列属性,例如坐标点,角度,样式等等.<p>设定这些状态一般是为了让绘画更容易,由于状态较多,不太可能再一一还原.所以save()方法保存原始状态,绘画之后再restore()回复原状态.</p><canvas id=canvas2></canvas><h5><span class=rel-1></span> 第8~9页</h5><p>嵌套调用save()和restore() 绘图环境的save()方法会将当前的绘图环境压入堆栈顶部.对应的restore()方法则会从堆栈顶部弹出一组状态信息,并据此恢复当前绘图环境的各个状态.<p>canvas状态包括了当前坐标变换信息,剪辑区域以及所有canvas绘图环境对象的属性,包括<a class=goto onclick='mainmenugoto("strokeStyle")'>strokeStyle</a>,<a class=goto onclick='mainmenugoto("fillStyle")'>fillStyle</a>与<a class=goto onclick='mainmenugoto("globalCompositeOperation")'>globalCompositeOperation</a>等<p>canvas状态并不包括当前的路径或位图.只能通过<a class=goto onclick='mainmenugoto("beginPath")'>beginPath</a>来重置路径</div><script>function test2(){let t=cavlib("canvas2").style(),n=t.ctx;n.canvas.width=500;n.canvas.height=300;n.save();n.translate(20,30);n.rotate(Math.PI/6);n.fillStyle="green";n.strokeStyle="red";n.globalAlpha=.7;n.font="18px serial";n.arc(40,40,30,0,Math.PI*2);n.lineWidth=5;n.fill();n.fillText("原点修改到(20,30),旋转30度,填充green",100,20);n.fillText("描边red,透明0,7,字体18px",100,40);n.stroke();n.restore();n.fillText("restore()后画矩形.状态回到默认",180,40);n.fillRect(100,0,50,50)}function test1(){let t=cavlib("canvas1").style(),n=t.ctx;n.save();n.translate(20,30);n.rotate(Math.PI/6);n.fillRect(0,0,90,45);n.arc(110,20,20,0,Math.PI*2);n.stroke();n.restore();n.fillRect(200,0,10,125);n.stroke()}test1();test2()</script>