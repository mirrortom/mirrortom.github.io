<div class=doc-page><h2>toBlob(callback,type,args)</h2><p>返回一个blob数据<pre>
  canvas.toBlob(callback,type,args)
</pre><br><h4>参数</h4><p><b class=txt-sky-4>callback</b> <small>function</small> 回调函数,可用参数为blob<p><b class=txt-sky-4>type</b> <small>String</small> 默认值是image/png,指示图片格式.其它值例如:image/jpeg<p><b class=txt-sky-4>args</b> <small>Number</small> 设置jpeg的质量0~1.0之间的值(也可以是其它参数)</p><br><h4>测验</h4><p>获取下图的blob,再给这个blob一个地址,设置到a的href属性上<p>这个功能可以将canvas数据当做一个文件下载下来<div class=grids><canvas id=canvas1></canvas><a id=file1 class="btn link"></a></div><p>使用参数image/jpeg,图片质量0.1<p>由于jpeg不保留透明度,所以图像背景成黑的了.设置了0.1的质量,所以图片看起来比较差<div class=grids><canvas id=canvas2></canvas><a id=file2 class="btn link"></a></div></div><script>function test2(){var t;let i=cavlib("canvas2").style(),n=i.ctx;for(n.lineWidth=5,n.translate(75,75),t=0;t<10;t++){n.beginPath();let i=randInt(0,256),r=randInt(0,256),u=randInt(0,256);n.strokeStyle=`rgb(${i},${r},${u})`;n.arc(0,0,7*t,0,Math.PI*2);n.stroke()}for(n.translate(105,0),n.transform(1,0,-Math.PI/6,1,0,0),t=10;t>0;t--){n.beginPath();let i=randInt(0,256),r=randInt(0,256),u=randInt(0,256);n.strokeStyle=`rgb(${i},${r},${u})`;n.arc(0,0,7*t,0,Math.PI*2);n.stroke()}let r=document.querySelector("#canvas2");r.toBlob(n=>{let t=document.querySelector("#file2");t.href=getObjectURL(n);t.innerHTML=`类型:${n.type} 大小:${n.size}bit,下载(右击链接另存为)`},"image/jpeg",.1)}function test1(){let i=cavlib("canvas1").style(),n=i.ctx;n.translate(150,75);n.lineWidth=5;n.transform(1,-Math.PI/6,0,1,0,0);for(var t=0;t<10;t++){n.beginPath();let i=randInt(0,256),r=randInt(0,256),u=randInt(0,256);n.strokeStyle=`rgb(${i},${r},${u})`;n.arc(0,0,7*t,0,Math.PI*2);n.stroke()}let r=document.querySelector("#canvas1");r.toBlob(n=>{let t=document.querySelector("#file1");t.href=getObjectURL(n);t.innerHTML=`类型:${n.type} 大小:${n.size}bit,下载(右击链接另存为)`})}function randInt(n,t){let i=Math.random()*(t-n);return Math.floor(i)+n}function getObjectURL(n){var t=null;return window.createObjectURL?t=window.createObjectURL(n):window.URL?t=window.URL.createObjectURL(n):window.webkitURL&&(t=window.webkitURL.createObjectURL(n)),t}test1();test2()</script>