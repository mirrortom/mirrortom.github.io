<!DOCTYPE html><html lang=en><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1.0"><link href=/mirrorui/mirrorui.css rel=stylesheet><link href=/mirroricon/mirroricon.css rel=stylesheet><title>lineDashOffset | canvas文档整理 | Mirror Space</title><style>.page{display:grid;grid-template-columns:210px auto}.mainmenubox{position:sticky;top:0;width:94%;max-height:100vh;overflow-x:hidden;overflow-y:auto}</style><div class=page><div class=mainmenubox id=mainmenubox></div><div class=pd-20><h2>lineDashOffset</h2><p>设置虚线偏移量.默认值 0.0<pre class="bg-gray pd-tb-10">
  ctx.lineDashOffset = value;
</pre><br><h4>测验</h4><p>画三条虚线,参数都为[15,10],第二条偏移量设为5,第三条偏移量设为10<p>观察三条虚线的起始处,发现实线段长度变短.15 10 5,这是设置偏移量的效果.好像是虚线开始处向左移动了一段距离(偏移量)<p>再看结尾处,发现也不一样,说明这种偏移是对整条虚线的.</p><canvas id=canvas1></canvas><p>如果设为负值,下面设置为-5.则是向右偏移这个距离.<p>如果看图会被误导,认为是虚线起点向右偏移了,其实不是.看结尾处边界,虚线是一样长的.起始处的空白是虚线的间隔部分.<p>最下面一条虚线是设置了偏移为15,正数,它起始也是间隔开始.因为向左偏移15后,起始处的实线段正好移掉了,接着的是间隔</p><canvas id=canvas2></canvas><h3>应用</h3><p>可利用偏移让虚线运动起来,原理就是用动画,每一帧画虚线时改变一次偏移量.这样每次虚线出现的位置就有变化,于是形成动画<p>下图虚线圆,每次半径变小0.1,虚线偏移量每次加1,起始为5,最大偏移100</p><canvas id=canvas3></canvas><script src=/jslib/cavlib.js></script><script>function test3(){let u=cavlib("canvas3").style(),n=u.ctx;n.lineWidth=2;let t=50,i=5;const r=()=>{n.clearRect(0,0,300,150),n.save(),n.beginPath(),n.setLineDash([10,5]),n.strokeStyle="brown",n.lineDashOffset=i,n.arc(150,70,t,0,Math.PI*2),n.stroke(),n.restore(),window.requestAnimationFrame(r),i+=1,i>100&&(i=5),t-=.1,t<10&&(t=50)};window.requestAnimationFrame(r)}function test1(){let r=cavlib("canvas1").style(),n=r.ctx;n.font="18px serial";let t={x:20,y:20},i={x:280,y:20};n.save();n.beginPath();n.setLineDash([15,10]);n.moveTo(t.x,t.y);n.lineTo(i.x,i.y);n.stroke();n.restore();n.fillText("15",t.x-5,t.y+20);n.save();n.beginPath();n.setLineDash([15,10]);n.strokeStyle="green";n.lineDashOffset=5;n.moveTo(t.x,t.y+40);n.lineTo(i.x,i.y+40);n.stroke();n.restore();n.fillText("10",t.x-5,t.y+60);n.save();n.beginPath();n.setLineDash([15,10]);n.strokeStyle="blue";n.lineDashOffset=10;n.moveTo(t.x,t.y+80);n.lineTo(i.x,i.y+80);n.stroke();n.restore();n.fillText("5",t.x-5,t.y+100)}function test2(){let r=cavlib("canvas2").style(),n=r.ctx;n.lineWidth=2;n.font="18px serial";let t={x:20,y:30},i={x:200,y:30};n.save();n.beginPath();n.setLineDash([15,10]);n.moveTo(t.x,t.y);n.lineTo(i.x,i.y);n.stroke();n.restore();n.save();n.beginPath();n.setLineDash([15,10]);n.strokeStyle="green";n.lineDashOffset=-5;n.moveTo(t.x,t.y+40);n.lineTo(i.x,i.y+40);n.stroke();n.restore();n.beginPath();n.lineWidth=1;n.strokeStyle="red";n.moveTo(t.x,20);n.lineTo(t.x,140);n.moveTo(t.x+5,50);n.lineTo(t.x+5,120);n.moveTo(i.x,20);n.lineTo(i.x,140);n.stroke();n.save();n.beginPath();n.setLineDash([15,10]);n.strokeStyle="blue";n.lineDashOffset=15;n.moveTo(t.x,t.y+90);n.lineTo(i.x,i.y+90);n.stroke();n.restore()}test1();test2();test3()</script></div></div><script src=/asset/js/canvasapimenu.js></script>