<!DOCTYPE html><html lang=en><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1.0,user-scalable=no"><link rel=apple-touch-icon sizes=180x180 href=/apple-touch-icon.png><link rel=icon type=image/png sizes=32x32 href=/favicon-32x32.png><link rel=icon type=image/png sizes=16x16 href=/favicon-16x16.png><link rel=manifest href=/site.webmanifest><link rel=mask-icon href=/safari-pinned-tab.svg color=#5bbad5><meta name=msapplication-TileColor content=#da532c><meta name=theme-color content=#ffffff><title>棋盘 | canvas-demo | Mirror Space</title><link href=/mirrorui/mirrorui.css rel=stylesheet><link href=/asset/css/blog.css rel=stylesheet><div class=layout><div class=layout-part1></div><div class=layout-part2><style>#canvas1,#canvas2,#canvas3{padding:20px;margin:20px}#canvas1{background-color:#daa520}#canvas2{background-color:#deb887}#canvas3{background-color:#ff7f50}</style><h1>canvas练习1 棋盘</h1><hr class=line><h3>围棋盘</h3><p>围棋盘有19X19交叉点,是个正方形,有9个特殊交叉点需要标记,最中间的叫"天元".<p>先画38条线,然后再特殊点画填充圆点.这两个用到的api主要有moveTo,lineTo,arc,retc<p>棋盘线外围的区域是canvas元素的padding:20px,背景色是设置的css<h4>关于画线</h4><p>如果在(0,0)(10,10)点画一条厚度为3的正方形,那么会发现正方形的上边和左边比右边和底边要细,似乎是3的一半<p>确实也是一半,还有一半跑到画布外面了.如果调整一个起点,例如(3,3)(10,10),那么可以发现canvas在画线时是以<p>坐标点为中心线的.例如(0,0)(0,10)这条线,且厚度为3,那么以这条线为中轴,左边1.5右边1.5,就是3.那么,左边<p>这部分已经跑到画布外面去了(坐标是[-1.5,0][-1.5,10]),显示不出来,只剩下右边的1.5了,所以看起来只有一半<h4>特殊点,天元点</h4><p>这个相对简单些,通过观察,这些点位置是3,9,15这个序列,一共9个点,后面数是前数加6.可以双层循环[1~6],3*i<p>可以满足这个序列,但要排除i为偶数的时候.</p><canvas id=canvas1><h3>围棋canvas画布</h3></canvas><hr class=line><h3>象棋盘</h3><p>10行9列,画法上与围棋盘一样.有楚河汉界,那一行不能贯穿竖线,所以竖线分两次画了<p>砲和兵的交叉点周围画上4个直角,这用到了变换坐标原点(translate)和旋转画布(rotate).<p>砲交叉点左上角画一个直角计算下坐标,如果以这交叉点为新原点,然后逆90度转动画布,此时,转动前位于交叉点右上角位置,<p>现在又到了左上角,这样可以直接再画一次左上角的直角而不必重新计算坐标.同理,转180度时,交叉点右下角位置又会出<p>现在左上角,转270度时,左下角位置会出现在左上角.这样一样,只需要计算一次左上角的坐标,旋转3次坐标系即可在交叉<p>点四个位置上画上直角.<p>九宫格斜线和楚河汉界也用到坐标原点重置,这个能避免很多的坐标计算,基本想法就是只计算参照点坐标,然后以这坐标为新原<p>点.通过坐标重置和坐标旋转,能简化很多复杂的坐标计算,由于是以参照点为原点,所以参照点将成为(0,0)点,其它坐标将基于<p>这个原点计算简化很多,坐标系变换大概是高中时学习过的数学课程.</p><canvas id=canvas2><h3>象棋canvas画布</h3></canvas><hr class=line><h3>国际象棋盘</h3><p>这个更简单些,是由64个小正方形组成的,可以用fillRect直接填充矩形.没有边框线和内线<p>黑白的方块交替,每一行起始颜色不同.第1行是黑色起,第2行是白色起.在双重循环时,每一行循环后要修改下交替变量.</p><canvas id=canvas3><h3>国际象棋canvas画布</h3></canvas><script>function wq(){var n,f;let e=document.querySelector("#canvas1");ctx=e.getContext("2d");let i=450,t=1,r=i/18;ctx.canvas.width=i;ctx.canvas.height=i;ctx.lineWidth=t;ctx.strokeStyle="#333";ctx.save();let u=3;for(ctx.lineWidth=u,ctx.strokeRect(u/2,u/2,i-u,i-u),ctx.restore(),ctx.save(),n=1;n<19;n++){let u=r*n-t/2;ctx.moveTo(0+t/2,u);ctx.lineTo(i-t/2,u)}for(ctx.stroke(),ctx.restore(),ctx.save(),n=1;n<19;n++){let u=r*n-t/2;ctx.moveTo(u,0+t/2);ctx.lineTo(u,i-t/2)}ctx.stroke();ctx.restore();ctx.save();let o=Math.ceil(r/4);for(ctx.fillStyle="#666",n=1;n<6;n++)if(n%2!=0)for(f=1;f<6;f++)if(f%2!=0){let i=r*f*3-t/2,u=r*n*3-t/2;ctx.beginPath();ctx.arc(i,u,o,0,Math.PI*2);ctx.fill()}ctx.restore()}function xq(){var r,u;let s=document.querySelector("#canvas2");ctx=s.getContext("2d");ctx.canvas.width=400;ctx.canvas.height=450;let n=1;ctx.lineWidth=n;let t=ctx.canvas.width/8;ctx.strokeStyle="#333";ctx.save();let e=3;for(ctx.lineWidth=e,ctx.strokeRect(e/2,e/2,ctx.canvas.width-e,ctx.canvas.height-e),ctx.restore(),ctx.save(),r=1;r<9;r++){let i=t*r-n/2;ctx.moveTo(0+n/2,i);ctx.lineTo(ctx.canvas.width-n/2,i)}for(ctx.stroke(),ctx.restore(),ctx.save(),r=1;r<8;r++){let i=t*r-n/2;ctx.moveTo(i,0+n/2);ctx.lineTo(i,4*t-n/2)}for(r=1;r<8;r++){let i=t*r-n/2;ctx.moveTo(i,5*t+n/2);ctx.lineTo(i,9*t-n/2)}ctx.stroke();ctx.restore();let f=10,i=[];for(i.push({x:t-n/2,y:2*t-n/2}),i.push({x:7*t-n/2,y:i[0].y}),i.push({x:n/2,y:3*t-n/2}),i.push({x:2*t-n/2,y:i[2].y}),i.push({x:4*t-n/2,y:i[2].y}),i.push({x:6*t-n/2,y:i[2].y}),i.push({x:8*t-n/2,y:i[2].y}),i.push({x:t-n/2,y:7*t-n/2}),i.push({x:7*t-n/2,y:i[7].y}),i.push({x:n/2,y:6*t-n/2}),i.push({x:2*t-n/2,y:i[9].y}),i.push({x:4*t-n/2,y:i[9].y}),i.push({x:6*t-n/2,y:i[9].y}),i.push({x:8*t-n/2,y:i[9].y}),u=0;u<14;u++){let n=i[u];for(ctx.save(),ctx.translate(n.x,n.y),r=0;r<4;r++)ctx.rotate(r/2*Math.PI),ctx.beginPath(),ctx.moveTo(-f*1.5,-f/2),ctx.lineTo(-f/2,-f/2),ctx.lineTo(-f/2,-f*1.5),ctx.strokeStyle="#c00",ctx.stroke();ctx.restore()}let o=[];for(o.push({x:3*t-n/2,y:n/2}),o.push({x:o[0].x,y:7*t+n/2}),u=0;u<o.length;u++){let i=o[u];ctx.save();ctx.translate(i.x,i.y);ctx.moveTo(n/2,n/2);ctx.lineTo(2*t-n/2,2*t-n/2);ctx.moveTo(n/2,2*t-n/2);ctx.lineTo(2*t-n/2,-n/2);ctx.stroke();ctx.restore()}ctx.save();ctx.translate(ctx.canvas.width-n/2,n/2);ctx.rotate(Math.PI/2);ctx.beginPath();ctx.font="32px 隶书,Microsoft YaHei";ctx.fillText("漢",4*t+9,t);ctx.fillText("界",4*t+9,2*t);ctx.restore();ctx.save();ctx.translate(n/2,ctx.canvas.height-n/2);ctx.rotate(-Math.PI/2);ctx.beginPath();ctx.font="32px 隶书,Microsoft YaHei";ctx.fillText("楚",4*t+9,t);ctx.fillText("河",4*t+9,2*t);ctx.restore()}function gjxq(){var t,n;let r=document.querySelector("#canvas3");ctx=r.getContext("2d");ctx.canvas.width=400;ctx.canvas.height=ctx.canvas.width;let i=ctx.canvas.width/8;for(ctx.save(),t=0;t<8;t++)for(n=0;n<8;n++){let r=n*i,u=t*i;ctx.fillStyle=t%2==1?n%2==1?"#333":"#eee":n%2==1?"#eee":"#333";ctx.fillRect(r,u,i,i)}ctx.restore()}wq();xq();gjxq()</script></div></div><script src=/asset/js/mainmenu.js></script>