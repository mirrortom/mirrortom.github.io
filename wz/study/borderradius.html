<!DOCTYPE html><html lang=en><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1.0,user-scalable=no"><link rel=apple-touch-icon sizes=180x180 href=/apple-touch-icon.png><link rel=icon type=image/png sizes=32x32 href=/favicon-32x32.png><link rel=icon type=image/png sizes=16x16 href=/favicon-16x16.png><link rel=manifest href=/site.webmanifest><link rel=mask-icon href=/safari-pinned-tab.svg color=#5bbad5><meta name=msapplication-TileColor content=#da532c><meta name=theme-color content=#ffffff><title>border radius | Mirror Space</title><link href=/mirrorui/mirrorui.css rel=stylesheet><link href=/mirroricon/mirroricon.css rel=stylesheet><link href=/asset/css/blog.css rel=stylesheet><div class=layout><div class=layout-part1></div><div class=layout-part2><div class=wz-page><style>.demo{display:inline-block;width:100px;height:70px;background-color:#dedede}.demo.box1{width:150px;height:100px}</style><p><small>更新日期:2022年1月9日</small><p>border-radius,css的圆角属性,下面是MDN的说明: 资料参考 <a href=https://developer.mozilla.org/zh-CN/docs/Web/CSS/border-radius target=_blank>MDN broder-radius</a><p>"CSS 属性 border-radius 允许你设置元素的外边框圆角.当使用一个半径时确定一个圆形,当使用两个半径时确定一个椭圆.这个(椭)圆与边框的交集形成圆角效果."<p class=article-title>属性值<p>例子是一个100 X 70 px的span,边框是border-box.4个角都设置了不同的圆角值.由图可见,顺序是 top-left, top-right, bottom-right, bottom-left<pre class=bg-gray-lt>

    border-radius:10px 20px 25px 35px;

</pre><br><div><span class=demo></span> <span class="demo mg-l-10" style="border-radius:10px 20px 25px 35px"></span></div><br><p>2个值简写,1值表示top-left,bottom-right, 2值表示top-right,bottom-left.由图可见就是对角线的2个角.<p>3个值简写,1,3值的依然表示top-left,bottom-right.中间值表示top-right,bottom-left,由图可见是右上角和左下角的对角线的2个角.<pre class=bg-gray-lt>

  border-radius:35px 0
  border-radius:0 35px

  border-radius:35px 0 20px // 中间值表示top-right,bottom-left

</pre><br><div><span class=demo></span> <span class="demo mg-l-10" style="border-radius:35px 0"></span> <span class="demo mg-l-10" style="border-radius:0 35px"></span> <span class="demo mg-l-10" style="border-radius:35px 0 20px"></span></div><p>根据定义:"当使用一个半径时确定一个圆形."上面的值都是设定的1个值,准确的说,是4个角都设置了一个半径值.而定义还说:"当使用两个半径时确定一个椭圆",那么如何设置2个半径,这又是为什么呢?<p>圆形有一个半径概念,椭圆形有长轴和短轴概念,可以认为有两个半径.圆的半径是圆心到圆周任意点的距离,椭圆的长轴和短轴是圆心到圆周的最长距离和最短距离.这个是圆和椭圆的基本知识.<p>先看设置2个半径的写法和效果.两种写法都是设置top-left的圆角半径.<pre class=bg-gray-lt>

  border-top-left-radius:40px 30px // 设置左上角,1值是椭圆水平半径,2值是垂直半径

  border-radius:40px 0 0 0/30px 0 0 0 // 看斜杆左边是水平半径,右边是垂直半径

</pre><br><div><span class=demo></span> <span class="demo mg-l-10" style="border-top-left-radius:40px 30px"></span> <span class="demo mg-l-10" style="border-radius:40px 0 0 0/30px 0 0 0"></span></div><p>使用百分比值时,水平半径基于盒模型的width,垂直半径对应height<pre class=bg-gray-lt>

  border-top-left-radius:50%

  border-radius:50% 0 0 0/50% 0 0 0

</pre><br><div><span class=demo></span> <span class="demo mg-l-10" style=border-top-left-radius:50%></span></div><p>如果水平半径设置为width的一半,垂直半径设置为height的一半.那么盒模型会变成椭圆形.如果是个正方形,会是一个圆.这是用border-radius画圆的办法.<pre class=bg-gray-lt>

  border-radius:50% // 使用50%,比较简单

  border-radius:50px/35px

</pre><br><div><span class=demo></span> <span class="demo mg-l-10" style=border-radius:50px/35px></span> <span class=demo style=width:70px></span> <span class=demo style=width:70px;border-radius:50%/50%></span></div><p class=article-title>研究分析<p>会设置值了,但不清楚原理.两个半径值是如何起作用的,圆和椭圆是如何影响圆角的,设计原理是怎样的?<p>以左上角为例,从盒模型的左上顶点为原点,向右边移动的距离,就是水平半径,就是设置的1值.向下边移动的距离就是垂直半径,就是设置是2值.<p>那么为什么是向右和下两个方向呢,计算机图形坐标有关的似乎都如此,比如canvas也是左上角为(0,0)点,右边和下边为正方向.winform也是,css盒子模型绝对定位坐标也是如此.<p>A点是盒模型的top-left角,当设置 border-radius:50px 时,会以 A 点为原点的坐标系,在 O 点(50,50)为圆心,半径50px,作圆.这个圆一定与 A 角的两条边相切,而 A 点与切点 X Y围成的区域 AXY就是为了形成圆角,而切掉的部分.<p>也就是说,这个圆角其实就是 OXY 这个扇形的圆弧部分.而圆弧 XY 是圆与 A 角的两条边相切的那部分圆弧.AX,AY的值就是 border-radius : X/Y 的值.</p><canvas id=canvas1></canvas><span class="demo box1 mg-10" style="border-radius:40px 0 0 0"></span><br><p>上面是设置一个半径的值,显然 AX = AY ,那么两个半径的情况如下.<p>和一个半径时的情况一样,只是圆变成椭圆了,圆角效果也是 OXY 这个椭圆的一部分,也是椭圆与 A 角的两边相切的那部分</p><canvas id=canvas2></canvas><span class="demo box1 mg-10" style="border-radius:70px 0 0 0/25px 0 0 0"></span><br><p>这个是左上角的情况,其它位置的角也是一样的,仍然是以这个角为原点的坐标系,(X,Y)点为圆心作圆或者椭圆,与这个角相切的区域围成的圆或者椭圆的部分,就是圆角效果.<p>右下的角A,它的(X,Y)圆心点的确立,是从A点出发向左和向上这两个方向的.不在是向右和向下了.这里可以认为是坐标变换了,相当于A点旋转了180度,这样一来,其实方向也是向右和向下的.</p><canvas id=canvas3></canvas><br><p>如果(X,Y)的值是盒模型的一半或者等于或者比盒模型的长宽都大会怎么样呢?<p>下图左1,左上角长短半径为 200px,110px时,css border-radius的效果.这个与canvas里模拟的结果并不一样.也就是说,不是定义里描述的那样:AXY区域与盒模型边框的交集.这说明浏览器在解释这个规则时,还有其它条件.<p>下图2,实际css效果模拟,圆角半径为 (100px,55px).也就是说,设置(200px,110px)的效果与(100px,55px)的效果是一样的.<div class=grids-2><div><canvas id=canvas4></canvas><span class="demo mg-10" style="border-radius:200px 0 0 0/110px 0 0 0"></span></div><div><canvas id=canvas5></canvas><span class="demo mg-10" style="border-radius:100px 0 0 0/55px 0 0 0"></span></div></div><p>圆角半径为盒模型长宽的一半以及等于长宽的情况.这个与实际css效果一样.<div class=grids-2><div><canvas id=canvas6></canvas><span class="demo mg-10" style="border-radius:50% 0 0 0"></span></div><div><canvas id=canvas7></canvas><span class="demo mg-10" style="border-radius:100% 0 0 0"></span></div></div><p>这里的规则没由细究了,可能需要参考W3C的规范,还有浏览器的实现规则.<p>有些想法记录一下<p>1.长短半径为宽度和高度的一半时,圆心位于盒模型的中心,这可能是一个临界点.圆心(X,Y)值小于这个位置时,椭圆一定与这个角的两边相切,并且椭圆在这个盒模型的里面.<p>2.如果半径大于一半,最大到等于盒模型的长/宽时,椭圆依然与这个角的两边相切,但是椭圆已经不在盒模型内部了.<p>3.超过盒模型时,椭圆与角的两边的延长线相切,切点显然已经不在盒模型内部了.<p>4.长/短轴最大不能超过盒模型的长/宽.如果超过了,就进行缩放转化.<p>浏览器转化可能如下: 假如是长轴RL超过了盒模型的宽度W,那么就将RL设置为W,再对应的将短轴RS等比调整.new_RS = W * RS / RL .浏览器这么做的原则可能是必须将切点位于角的两边上,或者说椭圆必须在盒模型的内部与两边相切.如果设置的圆角半径有1个满足不了这个原则,那么就调整为刚好能在内部相切的最大半径,即盒模型的长度/宽度,另一个半径则等比缩放.如果两个都不满足,就尝试调整长轴为盒模型长度,等比缩放短轴后,如果满足原则就完成.如果不满足,就调整短轴为盒模型高度,再等比缩放长轴,满足原则.不可能发生调整长短轴都无法符合原则的情况.</p><br></div><hr class=line><script src=/asset/js/article.js></script><script src=/cavlib/cavlib.js></script><script>(()=>{function t(){let t=40;n("canvas1",150,100,t,t)}function i(){n("canvas2",150,100,70,25)}function r(){let r=cavlib("canvas3").style(),n=r.ctx;n.font="18px serif";n.translate(200,130);let t=56,i=38;n.beginPath();n.fillStyle="#221f0080";n.fillRect(0,0,-150,-100);n.beginPath();n.fillStyle="blue";n.fillText("A",10,5);n.fillText("O",-t-15,-i-5);n.fillText("X",-t,15);n.fillText("Y",5,-i);n.beginPath();n.arc(-t,-i,2,0,Math.PI*2);n.fillStyle="red";n.fill();n.beginPath();n.ellipse(-t,-i,t,i,0,0,Math.PI*2);n.strokeStyle="red";n.stroke();n.beginPath();n.strokeStyle=n.fillStyle="black";r.lineArrow([0,-i,-t+15,-i]);r.lineArrow([-t,0,-t,-i+15]);n.beginPath();n.ellipse(-t,-i,t,i,0,0,Math.PI/2);n.lineTo(0,0);n.closePath();n.fillStyle="blue";n.fill()}function u(){let r=cavlib("canvas4").style(),n=r.ctx;n.font="18px serif";n.translate(50,30);let u=100,f=70,t=200,i=110;n.beginPath();n.fillStyle="#221f0080";n.fillRect(0,0,u,f);n.beginPath();n.fillStyle="blue";n.fillText("A",-10,-5);n.fillText("O",t+5,i+15);n.fillText("X",t,-5);n.fillText("Y",-15,i);n.beginPath();n.arc(t,i,2,0,Math.PI*2);n.fillStyle="red";n.fill();n.beginPath();n.ellipse(t,i,t,i,0,0,Math.PI*2);n.strokeStyle="red";n.stroke();n.beginPath();n.strokeStyle=n.fillStyle="black";r.lineArrow([0,i,t-15,i]);r.lineArrow([t,0,t,i-15]);n.beginPath();n.ellipse(t,i,t,i,0,Math.PI,Math.PI*3/2);n.lineTo(0,0);n.closePath();n.fillStyle="blue";n.fill();n.save();n.beginPath();n.ellipse(t,i,t,i,0,Math.PI,Math.PI*3/2);n.lineTo(0,0);n.closePath();n.clip();n.beginPath();n.rect(0,0,u,f);n.clip();n.fillStyle="red";n.fill();n.restore()}function f(){n("canvas5",100,70,100,55)}function e(){let t=150,i=100;n("canvas6",t,i,t/2,i/2)}function o(){let t=150,i=100;n("canvas7",t,i,t,i)}function n(n,t,i,r,u){let s=cavlib(n).style(),f=s.ctx;f.font="18px serif";f.translate(50,30);let h=t,c=i,e=r,o=u;f.beginPath();f.fillStyle="#221f0080";f.fillRect(0,0,h,c);f.beginPath();f.fillStyle="blue";f.fillText("A",-10,-5);f.fillText("O",e+5,o+15);f.fillText("X",e,-5);f.fillText("Y",-15,o);f.beginPath();f.arc(e,o,2,0,Math.PI*2);f.fillStyle="red";f.fill();f.beginPath();f.ellipse(e,o,e,o,0,0,Math.PI*2);f.strokeStyle="red";f.stroke();f.beginPath();f.strokeStyle=f.fillStyle="black";s.lineArrow([0,o,e-15,o]);s.lineArrow([e,0,e,o-15]);f.beginPath();f.ellipse(e,o,e,o,0,Math.PI,Math.PI*3/2);f.lineTo(0,0);f.closePath();f.fillStyle="blue";f.fill()}t();i();r();u();f();e();o()})(window)</script></div></div><script src=/asset/js/mainmenu.js></script>