<!DOCTYPE html><html lang=en><head><meta charset=utf-8 /><meta http-equiv=X-UA-Compatible content="IE=edge,chrome=1" /><meta name=viewport content="width=device-width,initial-scale=1.0,user-scalable=no" /><link rel=apple-touch-icon sizes=180x180 href=/apple-touch-icon.png /><link rel=icon type=image/png sizes=32x32 href=/favicon-32x32.png /><link rel=icon type=image/png sizes=16x16 href=/favicon-16x16.png /><link rel=manifest href=/site.webmanifest /><link rel=mask-icon href=/safari-pinned-tab.svg color=#5bbad5 /><meta name=msapplication-TileColor content=#da532c /><meta name=theme-color content=#ffffff /><title>生成表单元素 | Mirror Space</title><link href=/mirrorui/mirrorui.css rel=stylesheet /></head><body><div class=mg-20 id=formcreatebox><div class=msgpanel><h4>表单生成</h4><p>使用formcheck表单验证插件,使用mirrorui.选择表单元素和验证样式或其它要求,自动生成代码.</p></div><p class="article-title info">参数设置</p><div class="grids mg-tb-10"><label class="input-label grid-1 text-warning">表单类型</label><input class=input-check type=radio name=formtype id=ftype_text /> <label class="grid-1 input-check-label lg danger" for=ftype_text><b class=radio></b>文本</label><input class=input-check type=radio name=formtype id=ftype_pwd /> <label class="grid-1 input-check-label lg danger" for=ftype_pwd><b class=radio></b>密码</label><input class=input-check type=radio name=formtype id=ftype_select /> <label class="grid-1 input-check-label lg danger" for=ftype_select><b class=radio></b>下拉</label><input class=input-check type=radio name=formtype id=ftype_textarea /> <label class="grid-1 input-check-label lg danger" for=ftype_textarea><b class=radio></b>多行文本</label><input class=input-check type=radio name=formtype id=ftype_check /> <label class="grid-1 input-check-label lg danger" for=ftype_check><b class=radio></b>复选</label><input class=input-check type=radio name=formtype id=ftype_radio /> <label class="grid-1 input-check-label lg danger" for=ftype_radio><b class=radio></b>单选</label></div><div class="grids mg-tb-10" id=para_1><label class="input-label grid-1">标题</label><input class="input-text grid-1" id=flabel name=flabel type=text value="" /> <label class="input-label text-center grid-1">name</label><input class="input-text grid-1" id=fname name=fname type=text value="" /> <label class="input-label text-center grid-2">placeholder提示语</label><input class="input-text grid-3" id=fplaceholder name=fplaceholder type=text value="" /></div><div class="grids mg-tb-10" id=para_2><label class="input-label grid-1 text-info">内容验证</label><input class=input-check type=checkbox id=vtype_notnull errmsg=必填项 /> <label class="input-check-label grid-1 lg success" for=vtype_notnull><b class=check></b>非空</label><input class=input-check type=checkbox id=vtype_mobile errmsg=手机号无效 /> <label class="input-check-label grid-2 lg success" for=vtype_mobile><b class=check></b>国内手机号</label><input class=input-check type=checkbox id=vtype_money errmsg=金额无效 /> <label class="input-check-label grid-2 lg success" for=vtype_money><b class=check></b>钱(两位小数)</label><input class=input-check type=checkbox id=vtype_date errmsg=日期无效 /> <label class="input-check-label grid-1 lg success" for=vtype_date><b class=check></b>日期</label><input class=input-check type=checkbox id=vtype_url errmsg=url地址无效 /> <label class="input-check-label grid-1 lg success" for=vtype_url><b class=check></b>url</label><input class=input-check type=checkbox id=vtype_email errmsg=email地址无效 /> <label class="input-check-label grid-1 lg success" for=vtype_email><b class=check></b>email</label></div><div class="grids mg-tb-10" id=para_3><label class="input-label grid-1 text-info">内容验证</label><input class=input-check type=checkbox id=vtype_abc errmsg=限英文字母 /> <label class="input-check-label grid-2 lg success" for=vtype_abc><b class=check></b>英文字母</label><input class=input-check type=checkbox id=vtype_123 errmsg=限数字 /> <label class="input-check-label grid-1 lg success" for=vtype_123><b class=check></b>数字</label><input class=input-check type=checkbox id=vtype_abc123 errmsg=限英文(开头)和数字 /> <label class="input-check-label grid-2 lg success" for=vtype_abc123><b class=check></b>英文字母[数字]</label><input class=input-check type=checkbox id=vtype_abc_123 errmsg=限英文下划线(开头)和数字 /> <label class="input-check-label grid-3 lg success" for=vtype_abc_123><b class=check></b>英文字母[数字][下划线]</label></div><div class="grids mg-tb-10"><label class="input-label grid-1 text-info">长度验证</label> <label class="input-label grid-1">最大长度</label><input class="input-text grid-1" id=vtype_maxlen type=number value=0 /> <label class="input-label grid-1 text-center">最小长度</label><input class="input-text grid-1" id=vtype_minlen type=number value=0 /></div><div class="grids mg-tb-10"><label class="input-label grid-1 text-info">数值范围</label> <label class="input-label grid-1">最大值</label><input class="input-text grid-1" id=vtype_maxnum type=number value=0 /> <label class="input-label grid-1 text-center">最小值</label><input class="input-text grid-1" id=vtype_minnum type=number value=0 /></div><p class="article-title danger">注意:验证用于input,textarea控件.不能用在单选和复选控件.</p><p>对于select控件,可以做非空验证(必选验证),做法是设置一个默认选项,比如第一项,然后将它的值设置为空. &lt;option value="">请选择...&lt;option/></p><div class=mg-30><a class="btn primary" onclick=createForm()>生  成</a> <a class="btn primary" onclick="createForm('grid')">生成栅格布局</a> <a class="btn info" onclick=createFormFile()>文件框示例</a> <a class=btn onclick=reset()>重置参数</a> <strong class=mg-l-20><span class=text-danger id=errinfobox></span></strong></div>
  <div>
    <textarea id=htmlbox class="textarea bg-dark text-white" style=font-size:1.2em;height:150px></textarea></div><p class=article-title>程序流程</p><ul class="list num"><li>获取设置参数,检查参数,得到参数json</li><li>根据参数取一个表单元素模板</li><li>再根据参数修改模板,例如:在dom上加验证属性</li><li>稍微格式化后显示在文本框中</li></ul></div><hr class=line /><script src=/jslib/jslib.js></script><script>function createForm(n=null){$("#errinfobox").html("");let t=validPara();if(t!=!1){let u=formTempHtml(t.ftype);console.log(t);u=$.dataBind(u,t);let i=$("<div>").html(u)[0];if(t.vtype&&$(i).find("input,textarea,select").prop({vtype:t.vtype,verrmsg:t.verrmsg}),t.minlength>0&&$(i).find("input,textarea,select").prop("minlength",t.minlength),t.maxlength>0&&$(i).find("input,textarea,select").prop("maxlength",t.maxlength),isNaN(t.minnum)||$(i).find("input,textarea,select").prop("minnum",t.minnum),isNaN(t.maxnum)||$(i).find("input,textarea,select").prop("maxnum",t.maxnum),n==="grid"){$(i).find("label").addClass("grid-1");$(i).find("input,textarea,select").addClass("grid-2");let t='<div class="grids">\n'+i.innerHTML+"\n<\/div>",n=t.split("\n");for(var r=1,f=n.length-1;r<f;r++)n[r]="    "+n[r];$("#htmlbox").val(n.join("\n"))[0].select();return}$("#htmlbox").val(i.innerHTML)[0].select()}}function formTempHtml(n){let t="";switch(n){case"text":t='<label class="input-label">${flabel}<\/label>\n<input class="input-text" name="${fname}" type="text" value="" placeholder="${fplaceholder}" />';break;case"pwd":t='<label class="input-label">${flabel}<\/label>\n<input class="input-text" name="${fname}" type="password" value="" placeholder="${fplaceholder}" />';break;case"select":t='<label class="input-label">${flabel}<\/label>\n<select class="select" name="${fname}" >\n    <option value="">请选择...<\/option>\n    <option value="1">选项1<\/option>\n    <option value="2">选项2<\/option>\n<\/select>';break;case"textarea":t='<label class="textarea-label">${flabel}<\/label>\n<textarea class="textarea" name="${fname}" placeholder="${fplaceholder}" ><\/textarea>';break;case"radio":t='<input class="input-check" name="${fname}" type="radio" id="radioId" />\n<label class="input-check-label" for="radioId"><b class="radio"><\/b>${flabel}<\/label>';break;case"check":t='<input class="input-check" name="${fname}" type="checkbox" id="checkId" />\n<label class="input-check-label" for="checkId"><b class="check"><\/b>${flabel}<\/label>'}return t}function validPara(){let n={},o=$("input[name=formtype]:checked");if(o.length!=1)return $("#errinfobox").html("! [表单类型] 选择一个表单类型"),!1;n.ftype=o[0].id.replace("ftype_","");$("#para_1").find("input[name]").each(t=>{n[t.name]=t.value});let t=[],i=[];$("#para_2,#para_3").find("input[type=checkbox]:checked").each(n=>{t.push(n.id.replace("vtype_","")),i.push(n.getAttribute("errmsg"))});let r=parseInt($("#vtype_minlen").val()),u=parseInt($("#vtype_maxlen").val());if(r>0&&u>0&&u<r)return console.log(u+"____"+r),$("#errinfobox").html("! [长度验证] 最小长度不能大于最大长度"),!1;r>0&&(t.push("minlen"),i.push(`至少${r}个字符`));u>0&&(t.push("maxlen"),i.push(`不超过${u}个字符`));n.maxlength=u;n.minlength=r;let f=parseFloat($("#vtype_minnum").val()),e=parseFloat($("#vtype_maxnum").val());return f>0&&e>0&&e<f?($("#errinfobox").html("! [范围验证] 最小值不能大于最大值"),!1):(isNaN(f)||(t.push("minnum"),i.push(`不小于${f}`)),isNaN(e)||(t.push("maxlen"),i.push(`不大于${e}`)),n.minnum=f,n.maxnum=e,n.vtype=t.join("|"),n.verrmsg=i.join("|"),n)}function createFormFile(){let n='<div class="input-file-box">\n    <input class="input-file" onchange="$ui.inputFileChange(this)" type="file" />\n    <label class="input-file-label">选择文件<\/label>\n<\/div>\n\n';n+="要清空文件使用: $ui.clsInputFile(inputFileDom);";$("#htmlbox").val(n)[0].select()}function reset(){$("#htmlbox").val("");$("#formcreatebox").find("input[type=checkbox],input[type=radio]").each(n=>{n.checked=!1});$("#formcreatebox input[type=text]").val("");$("#vtype_minlen").val(0);$("#vtype_maxlen").val(0)}</script></body></html>