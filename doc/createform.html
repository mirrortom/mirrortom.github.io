<!DOCTYPE html><html lang=en><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1.0,user-scalable=no"><link rel=apple-touch-icon sizes=180x180 href=/apple-touch-icon.png><link rel=icon type=image/png sizes=32x32 href=/favicon-32x32.png><link rel=icon type=image/png sizes=16x16 href=/favicon-16x16.png><link rel=manifest href=/site.webmanifest><link rel=mask-icon href=/safari-pinned-tab.svg color=#5bbad5><meta name=msapplication-TileColor content=#da532c><meta name=theme-color content=#ffffff><title>生成表单元素 | Mirror Space</title><link href=/mirrorui/mirrorui.css rel=stylesheet><link href=/mirroricon/mirroricon.css rel=stylesheet><link href=/asset/css/blog.css rel=stylesheet><div class=layout><div class=layout-part1></div><div class=layout-part2><div id=formcreatebox><h4>表单生成</h4><p>使用formcheck表单验证插件,使用mirrorui.选择表单元素和验证样式或其它要求,自动生成代码.<p class="text-sky=5">参数设置<div class="grids mg-tb-10"><label class="form-label grid-1 text-warning">表单类型</label><m-radio class=grid-1 name=formtype id=ftype_text tag=文本></m-radio><m-radio class=grid-1 name=formtype id=ftype_pwd tag=密码></m-radio><m-radio class=grid-1 name=formtype id=ftype_select tag=下拉></m-radio><m-radio class=grid-1 name=formtype id=ftype_textarea tag=多行文本></m-radio><m-radio class=grid-1 name=formtype id=ftype_check tag=复选></m-radio><m-radio class=grid-1 name=formtype id=ftype_radio tag=单选></m-radio></div><div class="grids mg-tb-10" id=para_1><label class="form-label grid-1">标题</label><input class="input-text grid-1" id=flabel name=flabel type=text value=""> <label class="form-label text-center grid-1">name</label><input class="input-text grid-1" id=fname name=fname type=text value=""> <label class="form-label text-center grid-2">placeholder提示语</label><input class="input-text grid-3" id=fplaceholder name=fplaceholder type=text value=""></div><div class="grids mg-tb-10" id=para_2><label class="form-label grid-1 text-info">内容验证</label><m-check class=grid-1 tag=非空 id=vtype_notnull errmsg=必填项></m-check><m-check class=grid-1 tag=国内手机号 id=vtype_mobile errmsg=不是有效的国内手机号></m-check><m-check class=grid-1 tag=钱(两位小数) id=vtype_money errmsg=最多两位小数></m-check><m-check class=grid-1 tag=日期 id=vtype_date errmsg=不是有效的日期></m-check><m-check class=grid-1 tag=url id=vtype_url errmsg=不是有效的url></m-check><m-check class=grid-1 tag=email id=vtype_email errmsg=不是有效的email></m-check></div><div class="grids mg-tb-10" id=para_3><label class="form-label grid-1 text-info">内容验证</label><m-check class=grid-1 tag=英文字母 id=vtype_abc errmsg=""></m-check><m-check class=grid-1 tag=数字 id=vtype_123 errmsg=""></m-check><m-check class=grid-2 tag=英文字母[数字] id=vtype_abc123 errmsg=""></m-check><m-check class=grid-2 tag=英文字母[数字][下划线] id=vtype_abc_123 errmsg=""></m-check></div><div class="grids mg-tb-10"><label class="form-label grid-1 text-info">长度验证</label> <label class="form-label grid-1">最大长度</label><input class="input-text grid-1" id=vtype_maxlen type=number value=0> <label class="form-label grid-1 text-center">最小长度</label><input class="input-text grid-1" id=vtype_minlen type=number value=0></div><div class="grids mg-tb-10"><label class="form-label grid-1 text-info">数值范围</label> <label class="form-label grid-1">最大值</label><input class="input-text grid-1" id=vtype_maxnum type=number value=0> <label class="form-label grid-1 text-center">最小值</label><input class="input-text grid-1" id=vtype_minnum type=number value=0></div><div class="grids mg-tb-10"><label class="form-label grid-1 text-info">栅格比例</label> <label class="form-label grid-1">标题</label><input class="input-text grid-1" id=flabel_grid type=number value=3> <label class="form-label grid-1 text-center">表单项</label><input class="input-text grid-1" id=finput_grid type=number value=9></div><p class=text-red-5>注意:验证用于input,textarea控件.不能用在单选和复选控件.<p>对于select控件,可以做非空验证(必选验证),做法是设置一个默认选项,比如第一项,然后将它的值设置为空. &lt;option value="">请选择...&lt;option/><div class=mg-b-10><a class="btn sky" onclick=createForm()>生  成</a> <a class="btn blue" onclick='createForm("grid")'>生成栅格布局</a> <a class=btn onclick=reset()>重置参数</a> <strong class=mg-l-20><span class=text-red-5 id=errinfobox></span></strong></div><div><textarea id=htmlbox class="textarea bg-black-1 text-white-1" style=font-size:1.2em;height:150px></textarea></div><h6>程序流程</h6><ul class="list num"><li>获取设置参数,检查参数,得到参数json<li>根据参数取一个表单元素模板<li>再根据参数修改模板,例如:在dom上加验证属性<li>稍微格式化后显示在文本框中</ul></div><hr class=line><script src=/mirrorui/mirrorui.js></script><script src=/jslib/jslib.js></script><script>function createForm(n=null){$("#errinfobox").html("");let t=validPara();if(t!=!1){let u=formTempHtml(t.ftype);console.log(t);u=$.dataBind(u,t);let i=$("<div>").html(u)[0];if(t.vtype&&$(i).find("input,textarea,select").prop({vtype:t.vtype,verrmsg:t.verrmsg}),t.minlength>0&&$(i).find("input,textarea,select").prop("minlength",t.minlength),t.maxlength>0&&$(i).find("input,textarea,select").prop("maxlength",t.maxlength),isNaN(t.minnum)||$(i).find("input,textarea,select").prop("minnum",t.minnum),isNaN(t.maxnum)||$(i).find("input,textarea,select").prop("maxnum",t.maxnum),n==="grid"){let t=$("#flabel_grid").val(),u=$("#finput_grid").val();if(parseInt(t)+parseInt(u)!=12){$("#errinfobox").html("! [栅格比例] 栅格总和必须是12");return}$(i).find(".form-label,m-check,m-radio").addClass("grid-"+t);$(i).find(".input-text,.textarea,.select").addClass("grid-"+u);let e='<div class="grids">\n'+i.innerHTML+"\n<\/div>",n=e.split("\n");for(var r=1,f=n.length-1;r<f;r++)n[r]="    "+n[r];$("#htmlbox").val(n.join("\n"))[0].select();return}$("#htmlbox").val(i.innerHTML)[0].select()}}function formTempHtml(n){let t="";switch(n){case"text":t='<label class="form-label">${flabel}<\/label>\n<input class="input-text" name="${fname}" type="text" value="" placeholder="${fplaceholder}" />';break;case"pwd":t='<label class="form-label">${flabel}<\/label>\n<input class="input-text" name="${fname}" type="password" value="" placeholder="${fplaceholder}" />';break;case"select":t='<label class="form-label">${flabel}<\/label>\n<select class="select" name="${fname}" >\n    <option value="">请选择...<\/option>\n    <option value="1">选项1<\/option>\n    <option value="2">选项2<\/option>\n<\/select>';break;case"textarea":t='<label class="textarea-label">${flabel}<\/label>\n<textarea class="textarea" name="${fname}" placeholder="${fplaceholder}" ><\/textarea>';break;case"radio":t='<m-radio class="" name="${fname}" tag="${flabel}"><\/m-radio>';break;case"check":t='<m-check class="" name="${fname}" tag="${flabel}"><\/m-check>'}return t}function validPara(){let n={},o=$("m-radio[name=formtype].checked");if(o.length!=1)return $("#errinfobox").html("! [表单类型] 选择一个表单类型"),!1;n.ftype=o[0].id.replace("ftype_","");$("#para_1").find("input[name]").each(t=>{n[t.name]=t.value});let t=[],i=[];$("#para_2,#para_3").find("m-check.checked").each(n=>{t.push(n.id.replace("vtype_","")),i.push(n.getAttribute("errmsg"))});let r=parseInt($("#vtype_minlen").val()),u=parseInt($("#vtype_maxlen").val());if(r>0&&u>0&&u<r)return console.log(u+"____"+r),$("#errinfobox").html("! [长度验证] 最小长度不能大于最大长度"),!1;r>0&&(t.push("minlen"),i.push(`至少${r}个字符`));u>0&&(t.push("maxlen"),i.push(`不超过${u}个字符`));n.maxlength=u;n.minlength=r;let f=parseFloat($("#vtype_minnum").val()),e=parseFloat($("#vtype_maxnum").val());return e<f?($("#errinfobox").html("! [范围验证] 最小值不能大于最大值"),!1):(e>f&&(isNaN(f)||(t.push("minnum"),i.push(`不小于${f}`)),isNaN(e)||(t.push("maxlen"),i.push(`不大于${e}`)),n.minnum=f,n.maxnum=e),n.vtype=t.join("|"),n.verrmsg=i.join("|"),n)}function reset(){$("#htmlbox").val("");$("#formcreatebox").find(".input-check").each(n=>{$(n).removeClass("checked")});$("#formcreatebox input[type=text]").val("");$("#vtype_minlen").val(0);$("#vtype_maxlen").val(0)}</script></div></div><script src=/asset/js/mainmenu.js></script>