<h1>Socket示例1</h1><p>使用C# Socket库的TcpListener和TcpClient的控制台示例程序<p>源文件: Demo/tcp<h6>功能模块</h6><p>程序分为服务端和客户端2个部分,服务端文件是TcpService和TcpWorker.客户端文件是TcpClientService和TcpClientWorker.<p>Service用于管理建立的连接,每个Worker类是一个连接<p>服务端TcpService负责开启监听,接受连接,每次接受到连接,会建立一个TcpWorker类的对象,它负责连接的状态,收发信息.<p>客户端TcpClientService负责发起连接请求,每次建立连接时,会建立一个TcpClientWorker,它负责连接状态,收发信息.<p>服务/客户短的管理类负责管理:连接,客户端的建立/切换/关闭/控制收发信息等.<h6>界面</h6><p>程序使用控制台界面.已实现的功能通过命令的方式提供,在控制台上键入命令完成功能.<h6>阻塞</h6><p>程序使用的是同步风格,使用了异步的AcceptTcpClientAsync方法监听请求,在一个async方法的while循环里await.等同于在新线程中用阻塞方法等待请求的方式.<p>服务/客户端的工作类都有一个新线程用于等待读取远端发来的消息,是阻塞的.控制台线程被ReadLine()阻塞,用于等待命令和要发送内容.<h6>运行</h6><p>需要在2个控制台程序中运行.调用new TcpService().Run()开启服务端.调用new TcpClientService().Run()开启客户端