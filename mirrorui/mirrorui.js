(n=>{function t(n){if(typeof n=="string")if(/^<[a-z]+?>$/.test(n))this.push(document.createElement(n.substring(1,n.length-1)));else{let t=document.querySelectorAll(n);t.forEach(n=>{this.push(n)})}else if(n.nodeType)this.push(n);else if(n.length)for(var t=0,i=n.length;t<i;t++)n[t].nodeType&&this.push(n[t]);else throw new Error("the selector invalid");return this}t.prototype.push=function(n){return Array.prototype.push.call(this,n),this};t.prototype.reset=function(n){return Array.prototype.splice.call(this,0),n&&n.forEach(n=>{this.push(n)}),this};t.prototype.each=function(n){for(let t=0,i=this.length;t<i;t++){let i=n(this[t],t);if(i==!0)continue;else if(i==!1)break}};let f=n=>new t(n);f.extend=n=>{for(var i in n)t.prototype[i]=n[i]};f.fragment=(...n)=>{let t=document.createDocumentFragment();return t.append(...n),t};let i=(n,t,i)=>{let r=n.querySelectorAll(t);if(!i)return r;let u=[];return r.forEach(n=>{i.forEach(t=>{t===n&&u.push(t)})}),u},r=(n,t)=>{var i=[];if(t==="nextAll")for(let t=n.nextSibling;t;t=t.nextSibling)t.nodeType===1&&i.push(t);else if(t==="prevAll")for(let t=n.previousSibling;t;t=t.previousSibling)t.nodeType===1&&i.unshift(t);else n.parentNode.childNodes.forEach(t=>{t.nodeType===1&&t!==n&&i.push(t)});return i},u=(n,t)=>{let i;if(typeof n=="string"){let t=document.createRange();i=t.createContextualFragment(n)}else n instanceof DocumentFragment?i=n:n.length?(i=document.createDocumentFragment(),i.append(...n)):(i=document.createDocumentFragment(),i.append(n));let r=document.createDocumentFragment();e(r,i,t)},e=(n,t,i)=>{if(t.firstChild===null){i(n);return}if(t.firstChild.nodeName==="SCRIPT"){let r=document.createElement("script"),u=t.firstChild.src;u?fetch(u).then(n=>n.text()).then(u=>{r.innerHTML=u,n.append(r),t.removeChild(t.firstChild),e(n,t,i)}):(r.innerHTML=t.firstChild.innerHTML,n.append(r),t.removeChild(t.firstChild),e(n,t,i))}else n.append(t.firstChild),e(n,t,i)};f.extend({find:function(n){let t=[];return this.each(i=>{let r=i.querySelectorAll(n);r.forEach(n=>{t.push(n)})}),this.reset(t)},eq:function(n){return this[0]=this[n],Array.prototype.splice.call(this,1),this},index:function(){return Array.prototype.indexOf.call(this[0].parentNode.children,this[0])},siblings:function(n){let t=[];return this.each(u=>{let f=r(u);t=typeof n=="string"?t.concat(i(u.parentNode,n,f)):t.concat(f)}),this.reset(t)},next:function(n){let t=[];return this.each(u=>{let f=r(u,"nextAll");if(typeof n=="string"){let r=i(u.parentNode,n,f);r[0]&&t.push(r[0])}else f[0]&&t.push(f[0])}),this.reset(t)},nextAll:function(n){let t=[];return this.each(u=>{let f=r(u,"nextAll");t=typeof n=="string"?t.concat(i(u.parentNode,n,f)):t.concat(f)}),this.reset(t)},prev:function(n){let t=[];return this.each(u=>{let f=r(u,"prevAll");if(typeof n=="string"){let r=i(u.parentNode,n,f);r[0]&&t.push(r[0])}else{let n=f[f.length-1];n&&t.push(n)}}),this.reset(t)},prevAll:function(n){let t=[];return this.each(u=>{let f=r(u,"prevAll");t=typeof n=="string"?t.concat(i(u.parentNode,n,f)):t.concat(f)}),this.reset(t)},parent:function(n){let t=[];return this.each(i=>{if(n===undefined)return t.push(i.parentNode),!0;let r=i.parentNode.closest(n);t.push(r)}),this.reset(t)},prop:function(n,t){if(typeof n=="string"){if(t===undefined)return this[0]?this[0].getAttribute(n):void 0;this.each(i=>{i.setAttribute(n,t)})}else typeof n=="object"&&this.each(t=>{for(var i in n)t.setAttribute(i,n[i])});return this},val:function(n){return n===undefined?this[0]?this[0].value:void 0:(this.each(t=>{t.value=n}),this)},removeProp:function(...n){return this.each(t=>{for(var i=0,r=n.length;i<r;i++)t.removeAttribute(n[i])}),this},addClass:function(...n){let t=[];return n.forEach(n=>{n&&t.push(n)}),this.each(n=>{n.classList.add(...t)}),this},removeClass:function(...n){n.length===0&&this.each(n=>{n.setAttribute("class","")});let t=[];return n.forEach(n=>{n&&t.push(n)}),this.each(n=>{n.classList.remove(...t)}),this},hasClass:function(n){return this.length>0?this[0].classList.contains(n):!1},text:function(n){return n===undefined?this[0]?this[0].innerText:void 0:(this.each(t=>{t.innerText=n}),this)},html:function(n){return n===undefined?this[0]?this[0].innerHTML:void 0:(this.each(t=>{u(n,n=>{t.innerHTML="",t.append(n)})}),this)},append:function(n){return this.each(t=>{u(n,n=>{t.append(n)})}),this},prepend:function(n){return this.each(t=>{u(n,n=>{t.prepend(n)})}),this},before:function(n){return this.each(t=>{u(n,n=>{t.parentNode.insertBefore(n,t)})}),this},after:function(n){return this.each(t=>{u(n,n=>{t.parentNode.insertBefore(n,t.nextSibling)})}),this},remove:function(){this.each(n=>{n.parentNode.removeChild(n)});this.reset()},empty:function(){return this.each(n=>{n.innerHTML=""}),this}});n.ns||(n.ns={});n.ns.domHelp=f})(window);(n=>{const t=n.ns.domHelp;n.customElements.define("m-btn",(class extends HTMLElement{constructor(){super();t(this).addClass("btn")}connectedCallback(){}isLoading(){let n=t(this);return n.hasClass("loading")?!0:(n.addClass("loading"),!1)}clsLoading(n){let i=t(this);n>=0?setTimeout(()=>{i.removeClass("loading")},n):i.removeClass("loading")}}))})(window);(n=>{const t=n.ns.domHelp;n.customElements.define("m-switch",(class extends HTMLElement{constructor(){super();this.onclick=()=>{let n=t(this);this.onoff==!0?(this.onoff=!1,n.removeClass("checked"),n.hasClass("notag")||n.text(this.offTag)):(this.onoff=!0,n.addClass("checked"),n.hasClass("notag")||n.text(this.onTag));typeof this._onClick=="function"&&this._onClick(this)};let n=t(this);n.addClass("switch");this.onoff=n.hasClass("checked")?!0:!1;this.onTag=n.prop("on")||"ON";this.offTag=n.prop("off")||"OFF";n.hasClass("notag")||n.text(this.onoff?this.onTag:this.offTag)}connectedCallback(){}get checked(){return this.onoff}set onClicked(n){this._onClick=n}}))})(window);(n=>{const t=n.ns.domHelp;n.customElements.define("m-file",(class extends HTMLElement{constructor(){super();let n=t(this);this.tag=n.prop("tag")||"请选择文件...";n.addClass("input-file");this.reset()}connectedCallback(){}get inputFile(){return this.querySelector("input[type=file]")}get files(){return this.querySelector("input[type=file]").files}reset(){this.innerHTML="";this.innerText="";let i=t(this),n=t("<input>").prop("type","file")[0];this.hasAttribute("disabled")&&(n.disabled=!0);this.hasAttribute("multiple")&&(n.multiple=!0);n.onchange=()=>{let n="",i=this.inputFile.files;[].forEach.call(i,t=>{n+=t.name+","});n=n.substr(0,n.length-1);console.log(n);t(this).find(".form-label").text(n)};let r=t("<label>").addClass("form-label").text(this.tag)[0];i.append(n);i.append(r)}}))})(window);(n=>{const t=n.ns.domHelp;n.customElements.define("m-check",(class extends HTMLElement{constructor(){super();this.onclick=()=>{if(!this.hasAttribute("disabled")){let n=t(this),i=n.hasClass("checked");i==!0?n.removeClass("checked"):n.addClass("checked")}};let n=t(this);n.addClass("input-check");n.append(t("<span>").addClass("check")[0]);let i=n.prop("tag")||"";n.append(t("<label>").addClass("form-label").text(i)[0])}connectedCallback(){}get checked(){return t(this).hasClass("checked")}}))})(window);(n=>{const t=n.ns.domHelp;n.customElements.define("m-radio",(class extends HTMLElement{constructor(){super();this.onclick=()=>{if(!this.hasAttribute("disabled")){let n=t(this);n.hasClass("checked")||(n.addClass("checked"),n.siblings("m-radio[name="+n.prop("name")+"]").removeClass("checked"),typeof this._onClick=="function"&&this._onClick(this))}};let n=t(this);n.addClass("input-check");n.append(t("<span>").addClass("radio")[0]);let i=n.prop("tag")||"";n.append(t("<label>").addClass("form-label").text(i)[0])}connectedCallback(){}get checked(){return t(this).hasClass("checked")}set onClicked(n){this._onClick=n}}))})(window);(n=>{const t=n.ns.domHelp;let s=n=>{let i=t.fragment();i.append(t("<a>").addClass("tabsbox-left")[0]);i.append(t("<nav>").addClass("tabsbox-navbox").append(t("<div>").addClass("tabsbox-nav")[0])[0]);i.append(t("<a>").addClass("tabsbox-right")[0]);let r=t("<div>").addClass("tabsbox-menugroup").append(t("<span>").addClass("tabsbox-menutitle")[0]),u=t("<div>").addClass("tabsbox-menulist").append(t("<span>").addClass("tabsbox-goto-active").text("定位当前页")[0]).append(t("<span>").addClass("tabsbox-close-all").text("关闭全部")[0]).append(t("<span>").addClass("tabsbox-close-other").text("关闭其它")[0]);r.append(u[0]);i.append(r[0]);t(n).append(i).addClass("tabsbox")},r=n=>{let i=t(n).find(".tabsbox-tab.active");i.length>0&&i.removeClass("active")},e=(n,i)=>{r(n);return t(n).find(".tabsbox-tab[val='"+i+"']").addClass("active")[0]},i=(n,i)=>{let r=t(n).find(".tabsbox-nav")[0],u=r.clientWidth,f=i.offsetLeft;r.scrollTo(f-u/2,0)},h=(n,r,u,f,o)=>{t(r).find(".tabsbox-tabclose")[0].onclick=s=>{s.stopPropagation();let h=t(r).prop("val");if(Object.getOwnPropertyNames(n).length==1){t(r).remove();t(f).empty();for(let t in n)delete n[t];typeof o.pageClosed=="function"&&o.pageClosed(h);return}if(delete n[h],t(r).hasClass("active")){let r=Object.getOwnPropertyNames(n).pop();typeof o.pageBeforeChange=="function"&&o.pageBeforeChange(r);let s=e(u,r);i(u,s);t(f).html(n[r]);n[r]=null;typeof o.pageChanged=="function"&&o.pageChanged(r)}t(r).remove();typeof o.pageClosed=="function"&&o.pageClosed(h)}},c=(n,f,e,o,s)=>{f.onclick=()=>{if(i(e,f),!t(f).hasClass("active")){let h=t(f).prop("val");typeof s.pageBeforeChange=="function"&&s.pageBeforeChange(h);u(n,o);r(e);t(f).addClass("active");t(o).html(n[h]);n[h]=null;typeof s.pageChanged=="function"&&s.pageChanged(h)}}},l=(n,r,u,e)=>{t(r).find(".tabsbox-left")[0].onclick=()=>{f("left",r)},t(r).find(".tabsbox-right")[0].onclick=()=>{f("right",r)},t(r).find(".tabsbox-goto-active")[0].onclick=()=>{let n=t(r).find(".active")[0];n&&i(r,n)},t(r).find(".tabsbox-close-all")[0].onclick=()=>{let i=t(r).find(".tabsbox-nav").empty();t(u).empty();for(let t in n)delete n[t],typeof e.pageClosed=="function"&&e.pageClosed(t)},t(r).find(".tabsbox-close-other")[0].onclick=()=>{let i=t(r).find(".tabsbox-nav .tabsbox-tab:not(.active)").remove();for(let t in n)if(n.hasOwnProperty(t)){if(n[t]===null)continue;delete n[t];typeof e.pageClosed=="function"&&e.pageClosed(k)}}},a=(n,i,u,f,e,o)=>{r(f);let s=t("<label>").addClass("tabsbox-tab","active").prop({title:u,val:i}).html(u).append(t("<a>").addClass("tabsbox-tabclose").prop("title","关闭").text("×")[0])[0];h(n,s,f,e,o);c(n,s,f,e,o);t(f).find(".tabsbox-nav").append(s)},o=n=>{for(let t in n)if(n.hasOwnProperty(t)&&n[t]===null)return t;return null},u=(n,i)=>{let r=o(n);if(r&&n[r]===null){n[r]=t.fragment(...i.childNodes);return}},f=(n,i)=>{let r=t(i).find(".tabsbox-nav")[0],u=r.scrollLeft,f=r.clientWidth,o=r.scrollWidth,e=0;e=n==0?0:n==1?o:n=="left"?u-f/4:n=="right"?u+f/4:u+n;r.scrollTo(e,0)},v=(n,r,f,o)=>{let s=e(f,r);i(f,s);u(n,o);t(o).html(n[r]);n[r]=null},y=(n,t,i,r,e,o)=>{a(n,t,i,r,e,o),f(1,r),Object.getOwnPropertyNames(n).length>0&&u(n,e),n[t]=null},p=(n,t)=>{if(!n||!t)throw"必须传入tabsDom,contDom容器对象";let r={},f=n,e=t,u={},i={};return r.data={},r.onNewPageLoad=n=>{i.newPageLoad=n},r.onPageBeforeChange=n=>{i.pageBeforeChange=n},r.onPageChanged=n=>{i.pageChanged=n},r.onPageClosed=n=>{i.pageClosed=n},s(f),l(u,f,e,i),r.load=(n,t)=>{if(t||(t=n),u[n]!==null){if(u[n]){typeof i.pageBeforeChange=="function"&&i.pageBeforeChange(n);v(u,n,f,e);typeof i.pageChanged=="function"&&i.pageChanged(n);return}y(u,n,t,f,e,i);typeof i.newPageLoad=="function"&&i.newPageLoad(n,t,e)}},r.getActiveTabPid=()=>o(u),r};n.ns.cachepage=p})(window);(n=>{const s="msgbox-shadow",h="msgbox-modal",e="msgbox",i=n.ns.domHelp;let u=()=>{let n=i("<div>").addClass(s)[0];document.body.append(n);return i("<div>").addClass(h)[0]},f=n=>{document.body.style.overflow="hidden",document.body.append(n)},o=(n,t)=>{let r=i("<div>").addClass(e,e+"-"+(t||"center"));return r.text(n||""),r[0]},r=(n,t)=>{let r=i("<span>").addClass("btn",e+"-"+n,t).text(n==="ok"?"确定":"取消");return r[0]},t={};t.close=()=>{let n=document.body,t=n.querySelectorAll("."+h),i=n.querySelectorAll("."+s);t.forEach(n=>{n.parentNode.removeChild(n)});i.forEach(n=>{n.parentNode.removeChild(n)});document.body.style.overflow=null};t.alert=(n,i,e,s)=>{t.close();let h=u(),c=o(n,s),l=r("ok",e);l.onclick=()=>{t.close(),typeof i=="function"&&i()};c.appendChild(l);h.appendChild(c);f(h)};t.confirm=(n,i,e,s)=>{t.close();let c=u(),h=o(n,s),l=r("ok",e),a=r("cancel");l.onclick=()=>{t.close(),typeof i=="function"&&i(1)};a.onclick=()=>{t.close(),typeof i=="function"&&i(0)};h.innerText=n;h.appendChild(l);h.appendChild(a);c.appendChild(h);f(c)};t.prompt=(n,e,s,h)=>{t.close();let l=u(),c=o(n,h);c.classList.add("msgbox-prompt");let a=i("<input>").addClass("input-text","mg-tb-10").prop("type","text")[0],v=r("ok",s),y=r("cancel",s);v.onclick=()=>{t.close(),typeof e=="function"&&e(a.value)};y.onclick=()=>{t.close(),typeof e=="function"&&e("")};c.innerText=n;c.appendChild(a);c.appendChild(v);c.appendChild(y);l.appendChild(c);f(l)};t.show=(n,i,r)=>{t.close();let e=u();typeof n=="string"?e.innerHTML=n:e.appendChild(msgboxhtml);typeof i=="function"&&i();f(e);typeof r=="function"&&r()};n.ns.msgbox=t})(window);(n=>{const c=2100,l=1900,i=n.ns.domHelp;let f=(n,t)=>{let s=t||"yyyy/MM/dd HH:mm:ss",i={};i.yyyy=n.getFullYear();i.yy=i.yyyy.toString().substr(2);let r=n.getMonth()+1;i.MM=r>9?r:"0"+r;i.M=r;let u=n.getDate();i.dd=u>9?u:"0"+u;i.d=u;let f=n.getHours();i.HH=f>9?f:"0"+f;i.H=f;let e=n.getMinutes();i.mm=e>9?e:"0"+e;i.m=e;let o=n.getSeconds();i.ss=o>9?o:"0"+o;i.s=o;for(let n in i)s=s.replace(n,i[n]);return s},t={box:"date-box",row0:"date-row-ymt",col00:"date-col-ym",col01:"date-col-prev",col02:"date-col-next",col03:"date-col-today",row1:"date-row-week",col1:"date-col-week",weekend:"date-weekend",row2:"date-row-day",col2:"date-col-day",dayout:"date-dayout",today:"date-today",row3:"date-row-time",col30:"date-col-clear",col31:"date-col-time",col32:"date-col-ok",opsym:"date-ops-ym",opsyear:"date-ops-year",opsmonth:"date-ops-month",opyear:"date-op-year",opmonth:"date-op-month",opstime:"date-ops-time",opshour:"date-ops-hour",opsplus:"date-ops-plus",ophour:"date-op-hour",opam:"date-op-am",oppm:"date-op-pm",opplus:"date-op-plus",selected:"date-selected",open:"date-open",startOps:"[class^=date-ops]"},e=null,u=null,r=null,o=n=>{let t=window.event||arguments.callee.caller.arguments[0];t.stopPropagation();let i=t.currentTarget;w(i,n);u=k();b(u);ct()},w=(n,t)=>{e=n;let i=n.value.trim();/^[0-9]{4}\/[0-9]{2}\/[0-9]{2}$/.test(i)?i=i+" 00:00:00":/^[0-9]{4}\/[0-9]{2}\/[0-9]{2} [0-9]{2}:[0-9]{2}$/.test(i)?i=i+":00":/^[0-9]{4}\/[0-9]{2}\/[0-9]{2} [0-9]{2}:[0-9]{2}:[0-9]{2}$/.test(i)?!0:i=null;let f=Date.parse(i),u=isNaN(f)?new Date((new Date).setHours(0,0,0)):new Date(f);r={};r.year=u.getFullYear();r.month=u.getMonth();r.day=u.getDate();r.hour=u.getHours();r.minute=u.getMinutes();r.second=u.getSeconds();r.dateFmt="yyyy/MM/dd";r.fmtType=1;t&&t.fmt=="datetime"&&(r.dateFmt="yyyy/MM/dd HH:mm:ss",r.fmtType=2)},b=r=>{let u=n.innerWidth;u>576&&(r.style.left=e.offsetLeft+"px",r.style.top=e.offsetTop+e.offsetHeight+"px");i(document.body).find("."+t.box).remove();document.body.append(r);u<576&&r.focus()},a=()=>{u=null,e=null,r=null,i(document.body).find("."+t.box).remove()},k=()=>{let f=i("<div>").addClass(t.row0).append(d()).append(nt()).append(tt()).append(it())[0],e=i("<div>").addClass(t.row1).append(rt())[0],o=i("<div>").addClass(t.row2).append(y())[0],u=i("<div>").addClass(t.box).prop("tabIndex",-1).append(f).append(e).append(o),n=i("<div>").addClass(t.row3).append(ut());return r.fmtType==2&&n.append(ft()),n.append(ot()),u.append(n[0]),u[0]},d=()=>i("<b>").addClass(t.col00).text(f(new Date(r.year,r.month),"yyyy年MM月"))[0],g=()=>{let n=st(),e=i("<div>").addClass(t.opsym),u=i("<div>").addClass(t.opsyear);for(let f=0;f<n.length;f++){let o=n[f]==r.year?t.selected:"",e=n[f],s=i("<b>").addClass(t.opyear,o).prop("val",e).text(e)[0];u.append(s)}let f=i("<div>").addClass(t.opsmonth);for(let n=0;n<12;n++){let u=r.month==n?t.selected:"",e=i("<b>").addClass(t.opmonth,u).prop("val",n).text(n+1+"月")[0];f.append(e)}return e.append(u[0]).append(f[0])[0]},nt=()=>i("<b>").addClass(t.col01)[0],tt=()=>i("<b>").addClass(t.col02)[0],it=()=>i("<div>").addClass(t.col03).text("今天")[0],rt=()=>{let n=i.fragment(),r=["日","一","二","三","四","五","六"];for(let u=0;u<r.length;u++){let f=u===0||u===6?t.weekend:"",e=i("<b>").addClass(t.col1,f).text(r[u])[0];n.append(e)}return n},y=()=>{let u=ht(r.year,r.month),f=i.fragment();for(var n=0;n<u.length;n++){let r=u[n];r.istoday=r.Istoday?t.today:"";r.isselected=r.Isselected?t.selected:"";r.isdayinmonth=r.Isdayinmonth?"":t.dayout;r.isweekend=r.Isweekend?t.weekend:"";let e=i("<b>").prop({year:r.yyyy,month:r.MM,day:r.dd}).addClass(t.col2,r.istoday,r.isdayinmonth,r.isselected,r.isweekend).text(r.dd)[0];f.append(e)}return f},ut=()=>i("<div>").addClass(t.col30).text("清空")[0],ft=()=>i("<b>").addClass(t.col31).text(f(new Date(0,0,0,r.hour,r.minute,r.second),"HH : mm : ss"))[0],et=()=>{let e=i("<div>").addClass(t.opshour),u=r.hour;u>12&&(u=u-12);u==0&&(u=12);for(var f=1;f<13;f++){let n=u==f?t.selected:"";e.append(i("<b>").addClass(t.ophour,"h"+f,n).prop("val",f).text(f)[0])}e.append(i("<b>").addClass(t.opam,r.hour<12?t.selected:"").text("上午")[0]);e.append(i("<b>").addClass(t.oppm,r.hour>11?t.selected:"").text("下午")[0]);let n=i("<div>").addClass(t.opsplus);return n.append(i("<b>").addClass(t.opplus).prop({opdir:1,optype:"m",max:5}).text("+")[0]),n.append(i("<b>").addClass(t.opplus).prop({opdir:1,optype:"m",max:9}).text("+")[0]),n.append(i("<b>").addClass(t.opplus).prop({opdir:1,optype:"s",max:5}).text("+")[0]),n.append(i("<b>").addClass(t.opplus).prop({opdir:1,optype:"s",max:9}).text("+")[0]),n.append(i("<b>").addClass(t.opplus).prop({opdir:-1,optype:"m",max:5}).text("-")[0]),n.append(i("<b>").addClass(t.opplus).prop({opdir:-1,optype:"m",max:9}).text("-")[0]),n.append(i("<b>").addClass(t.opplus).prop({opdir:-1,optype:"s",max:5}).text("-")[0]),n.append(i("<b>").addClass(t.opplus).prop({opdir:-1,optype:"s",max:9}).text("-")[0]),e.append(n[0]),i("<div>").addClass(t.opstime).append(e[0])[0]},ot=()=>i("<div>").addClass(t.col32).text("确定")[0],v=()=>{let n=y();i(u).find("."+t.row2).empty().append(n);p()},h=()=>{i(u).find("."+t.col31).text(f(new Date(0,0,0,r.hour,r.minute,r.second),"HH : mm : ss"))},st=()=>{let n=[];for(let t=l;t<=c;t++)n.push(t);return n},ht=(n,t)=>{if(!Number.isInteger(n)||!Number.isInteger(t)||t<0||t>11)return null;let i=new Date(n,t,1);i.setDate(1-i.getDay());let e=f(new Date,"yyyyMMdd"),u=[];for(let n=0;n<42;n++){let o={};o.yyyy=i.getFullYear();o.MM=i.getMonth();o.dd=i.getDate();o.Isdayinmonth=o.MM==t;o.Istoday=f(i,"yyyyMMdd")==e;o.Isselected=o.yyyy==r.year&&o.MM==r.month&&o.dd==r.day;o.Isweekend=n%7==0||(n+1)%7==0;i.setDate(o.dd+1);u.push(o)}return u},s=()=>{i("."+t.box).find("."+t.opsym+",."+t.opstime).remove(),i("."+t.box).find("."+t.col00+",."+t.col31).removeClass(t.open)},ct=()=>{lt(),at(),pt(),wt(),p(),r.fmtType==2&&bt(),ti(),ii(),ri()},lt=()=>{u.onclick=n=>{n.stopPropagation(),s()}},at=()=>{i(u).find("."+t.col00)[0].onclick=n=>{n.stopPropagation();let e=n.currentTarget,o=i(u).find("."+t.opsym);if(o.length>0){s();return}s();let r=g();i(u).append(r);let f=i(r).find("."+t.opsyear),h=i(r).find("."+t.opsyear+" ."+t.selected),c=h[0].offsetTop-f[0].clientHeight/2;f[0].scrollTo(0,c);i(e).addClass(t.open);vt();yt()}},vt=()=>{i(u).find("."+t.opyear).each(n=>{n.onclick=n=>{n.stopPropagation();let e=n.currentTarget,o=i(u).find("."+t.col00);r.year=parseInt(i(e).prop("val"));o.text(f(new Date(r.year,r.month),"yyyy年MM月"));v()}})},yt=()=>{i(u).find("."+t.opmonth).each(n=>{n.onclick=n=>{n.stopPropagation();let e=n.currentTarget,o=i(u).find("."+t.col00);r.month=parseInt(i(e).prop("val"));o.text(f(new Date(r.year,r.month),"yyyy年MM月"));v();s()}})},pt=()=>{i(u).find("."+t.col01+",."+t.col02).each(n=>{n.onclick=n=>{n.stopPropagation();let s=n.currentTarget,h=i(s).hasClass(t.col01)?2:1,a=i(u).find("."+t.col00),o=r.year,e=r.month;e=h==1?e+1:e-1;e<0?(e=11,o=o>l?o-1:c):e>11&&(e=0,o=o<c?o+1:l);a.text(f(new Date(o,e),"yyyy年MM月"));r.year=o;r.month=e;v()}})},wt=()=>{i(u).find("."+t.col03)[0].onclick=n=>{n.stopPropagation();let t=new Date((new Date).setHours(r.hour,r.minute,r.second));e.value=f(t,r.dateFmt);o.close()}},bt=()=>{i(u).find("."+t.col31)[0].onclick=n=>{n.stopPropagation();let r=n.currentTarget,f=i(u).find("."+t.opstime);if(f.length>0){s();return}s();let e=et();i(u).append(e);i(r).addClass(t.open);kt();dt();gt();ni()}},kt=()=>{i(u).find("."+t.opstime)[0].onclick=n=>{n.stopPropagation()}},dt=()=>{i(u).find("."+t.ophour).each(n=>{n.onclick=n=>{n.stopPropagation();let e=n.currentTarget;i(e).parent().find("."+t.ophour).removeClass(t.selected);i(e).addClass(t.selected);let f=parseInt(i(e).prop("val"));i(u).find("."+t.opam).hasClass(t.selected)?f==12&&(f=0):f<12&&(f+=12);r.hour=f;h()}})},gt=()=>{i(u).find("."+t.opam)[0].onclick=n=>{n.stopPropagation(),r.hour>11&&(r.hour=r.hour-12),i(u).find("."+t.oppm).removeClass(t.selected),i(u).find("."+t.opam).addClass(t.selected),h()},i(u).find("."+t.oppm)[0].onclick=n=>{n.stopPropagation(),r.hour<12&&(r.hour=r.hour+12),i(u).find("."+t.opam).removeClass(t.selected),i(u).find("."+t.oppm).addClass(t.selected),h()}},ni=()=>{i(u).find("."+t.opplus).each(n=>{n.onclick=n=>{n.stopPropagation();let c=n.currentTarget,f=i(c),l=parseInt(f.prop("opdir")),a=f.prop("optype"),e=parseInt(f.prop("max")),t=[[0,0],[0,0]];t[0][0]=Math.trunc(r.minute/10)%10;t[0][1]=Math.trunc(r.minute)%10;t[1][0]=Math.trunc(r.second/10)%10;t[1][1]=Math.trunc(r.second)%10;let o=a=="m"?0:1,s=e==5?0:1,u=t[o][s];u=u+l;u>e?u=0:u<0&&(u=e);t[o][s]=u;r.minute=parseInt(t[0][0]+""+t[0][1]);r.second=parseInt(t[1][0]+""+t[1][1]);h()}})},p=()=>{i(u).find("."+t.col2).each(n=>{n.onclick=n=>{n.stopPropagation();let t=n.currentTarget,u=new Date(i(t).prop("year"),i(t).prop("month"),i(t).prop("day"),r.hour,r.minute,r.second);e.value=f(u,r.dateFmt);o.close()}})},ti=()=>{i(u).find("."+t.col30)[0].onclick=n=>{n.stopPropagation(),e.value="",o.close()}},ii=()=>{i(u).find("."+t.col32)[0].onclick=n=>{n.stopPropagation(),i(u).find("."+t.col2+"."+t.selected)[0].click(),o.close()}},ri=()=>{document.removeEventListener("click",a),document.addEventListener("click",a)};o.close=()=>{a()};n.ns.myDatePick=o})(window);(n=>{const t=n.ns.domHelp;n.customElements.define("m-pagenum",(class extends HTMLElement{constructor(){super();this.cfg={};let n=t(this);n.addClass("pagenum")}connectedCallback(){}get config(){return this.cfg}set config(n){this.cfg.PageIndex=n.pageIndex||1;this.cfg.PageSize=n.pageSize>4&&n.pageSize<51?n.pageSize:10;this.cfg.TotalData=n.totalData||0;let t=parseInt(this.cfg.TotalData/this.cfg.PageSize),i=this.cfg.TotalData%this.cfg.PageSize;this.cfg.TotalPage=i>0?t+1:t;this.cfg.TotalBtn=n.totalBtn>4&&n.totalBtn<11?n.totalBtn:5;this.cfg.OnPageChg=n.onPageChg}pagenumRange(){let n=this.cfg,t=n.PageIndex-parseInt(n.TotalBtn/2)+(n.TotalBtn%2==0?1:0),i=n.PageIndex+parseInt(n.TotalBtn/2);t<1&&(t=1,i=i>n.TotalPage?n.TotalPage:n.TotalBtn);i>n.TotalPage&&(i=n.TotalPage,t=i-n.TotalBtn+1,t<1&&(t=1));this.cfg.StartIndex=t;this.cfg.EndIndex=i}create(n){n&&(this.config=n);let i=this.cfg;this.pagenumRange();this.innerHTML="";this.innerText="";let r=t("<span>").addClass("btn-group","pagenum-btns")[0];if(r.append(t("<a>").addClass("btn","pagenum-num").prop("pagenum",i.PageIndex-1).text("〈")[0]),i.StartIndex>1){let n=i.PageIndex==1?"active":"num";r.append(t("<a>").addClass("btn","pagenum-"+n).prop("pagenum",1).text("1")[0])}i.StartIndex>2&&r.append(t("<span>").addClass("btn").text("...")[0]);for(let n=i.StartIndex;n<=i.EndIndex;n++){let u=n,f=u==i.PageIndex?"active":"num";r.append(t("<a>").addClass("btn","pagenum-"+f).prop("pagenum",u).text(u)[0])}if(i.EndIndex<i.TotalPage-1&&r.append(t("<span>").addClass("btn").text("...")[0]),i.EndIndex<i.TotalPage){let n=i.PageIndex==i.TotalPage?"active":"num";r.append(t("<a>").addClass("btn","pagenum-"+n).prop("pagenum",i.TotalPage).text(i.TotalPage)[0])}r.append(t("<a>").addClass("btn","pagenum-num").prop("pagenum",i.PageIndex+1).text("〉")[0]);let u=t("<span>").addClass("pagenum-skip")[0];u.innerHTML=`共<b class="pagenum-total">${i.TotalPage}</b>页&emsp;跳转<input class="input-text pagenum-input" />页&emsp;<a class="btn pagenum-ok">确定</a>`;this.appendChild(r);this.appendChild(u);t(this).find(".pagenum-num").each(n=>{n.onclick=()=>{let r=parseInt(t(n).prop("pagenum"))||0;r<1||r>i.TotalPage||(i.PageIndex=r,this.create(),typeof this.cfg.OnPageChg=="function"&&this.cfg.OnPageChg(r))}});t(this).find(".pagenum-ok")[0].onclick=()=>{let n=parseInt(t(this).find(".pagenum-input")[0].value)||0;n<1||n>i.TotalPage||(i.PageIndex=n,this.create(),typeof this.cfg.OnPageChg=="function"&&this.cfg.OnPageChg(n))}}}))})(window);(n=>{const t=n.ns.domHelp;n.customElements.define("m-sidemenu",(class extends HTMLElement{constructor(){super();let n=t(this);n.addClass("sidemenu")}connectedCallback(){}create(n,i){if(n){this.innerHTML="";this.innerText="";for(let i=0,r=n.length;i<r;i++){let r=n[i],u=t("<ul>").addClass("sidemenu-group"),f=t("<span>").addClass("sidemenu-label").html(r.title);f.append(t("<i>").addClass("sidemenu-arrdown")[0]);r.styles&&f.addClass(...r.styles);r.props&&f.prop(r.props);u.append(t("<li>").append(f[0])[0]);for(let n=0,i=r.menus.length;n<i;n++){let i=r.menus[n];if(i.title=="-"){u.append(t("<li>").html('<b class="sidemenu-split"><\/b>')[0]);continue}let f=t("<a>").addClass("sidemenu-item").text(i.title);i.styles&&f.addClass(...i.styles);i.props&&f.prop(i.props);u.append(t("<li>").append(f[0])[0])}this.append(u[0])}}t(this).find(".sidemenu-label").each(n=>{n.onclick=()=>{let r="sidemenu-arrdown",u="sidemenu-arrleft",i=t(n).find(`.${r},.${u}`);i.hasClass(r)?(i.removeClass(r),i.addClass(u),t(n).parent(".sidemenu-group").addClass("sidemenu-group-close")):(i.addClass(r),i.removeClass(u),t(n).parent(".sidemenu-group").removeClass("sidemenu-group-close"))}});t(this).find(".sidemenu-item").each((n,r)=>{n.onclick=()=>{t(this).find(".sidemenu-item.active").removeClass("active");t(n).addClass("active");let u=r;typeof i=="function"&&i(n,u)}})}activeItem(n){let i=t(this).find(".sidemenu-item")[n];i.click()}}))})(window);(n=>{const t=n.ns.domHelp;n.customElements.define("m-docmenu",(class extends HTMLElement{constructor(){super();let n=t(this);n.addClass("docmenu")}connectedCallback(){}create(n,i,r){if(n){let i=(n,u)=>{let f=t("<ul>").addClass("docmenu-group","docmenu-group-close"),e=t("<span>").addClass("docmenu-title").html('<i class="docmenu-close"><\/i>'+n.title);f.append(t("<li>").append(e[0])[0]);for(let u=0;u<n.menus.length;u++){let e=n.menus[u];if(typeof e=="object"&&e.menus){let n=t("<li>")[0];i(e,n);f.append(n)}else{let n=t("<a>").addClass("docmenu-item");typeof r=="function"&&r(n[0],e);f.append(t("<li>").append(n[0])[0])}}u.append(f[0])},f=t.fragment();for(var u=0;u<n.length;u++)i(n[u],f);this.append(f)}t(this).find(".docmenu-title").each(n=>{n.onclick=()=>{let r="docmenu-open",u="docmenu-close",i=t(n).find(`.${r},.${u}`);i.hasClass(r)?(i.removeClass(r),i.addClass(u),t(n).parent(".docmenu-group").addClass("docmenu-group-close")):(i.addClass(r),i.removeClass(u),t(n).parent(".docmenu-group").removeClass("docmenu-group-close"))}});t(this).find(".docmenu-item").each((n,r)=>{n.onclick=()=>{t(this).find(".docmenu-item.active").removeClass("active");t(n).addClass("active");let u=r;typeof i=="function"&&i(n,u)}})}activeItem(n){let i=t(this).find(".docmenu-item")[n];i.click()}openGroups(n=-1){let u="docmenu-open",i="docmenu-close",f="docmenu-group-close";if(n==-1){t(this).find(".docmenu-group").removeClass(f);t(this).find(`.${i}`).removeClass(i).addClass(u);return}let r=t(this).find(".docmenu-group").eq(n);r.length==1&&(r.removeClass(f),r.find(`.${i}`).eq(0).removeClass(i).addClass(u))}closeGroups(n=-1){let i="docmenu-open",u="docmenu-close",f="docmenu-group-close";if(n==-1){t(this).find(".docmenu-group").addClass(f);t(this).find(`.${i}`).removeClass(i).addClass(u);return}let r=t(this).find(".docmenu-group").eq(n);r.length==1&&(r.addClass(f),r.find(`.${i}`).eq(0).removeClass(i).addClass(u))}}))})(window);(n=>{const t=n.ns.domHelp;n.customElements.define("m-tabs",(class extends HTMLElement{height=320;constructor(){super();this._init()}connectedCallback(){}_init(){let n=t(this);this.style.height=n.prop("height")||this.height+"px";n.addClass("tabs");this._tabOnClick()}_tabOnClick(){t(this).find(".tabs-label").each(n=>{n.onclick=()=>{let i="active";if(!t(n).hasClass(i)){t(this).find(".active").removeClass(i);t(n).addClass(i);let r=t(n).prop("pid");if(r==null||r.length==0){let r=t(n).index();t(this).find(".tabs-panel").eq(r).addClass(i);return}t(this).find('.tabs-panel[pid="'+r+'"]').addClass(i)}}})}activeTab(n){if(n!=undefined&&!isNaN(parseInt(n))){let i=t(this).find(".tabs-label").eq(n)[0];i&&i.click()}}}))})(window);(n=>{const t=n.ns.domHelp;n.customElements.define("m-msgshow",(class extends HTMLElement{constructor(){super();let n=t(this);t(this).addClass("msgshow");let i=n.prop("title")||"",r=n.prop("msg")||"";if(i){let r=t("<span>").addClass("title").text(i);n.append(r[0])}if(r){let i=t("<span>").addClass("msg").text(r);n.append(i[0])}}connectedCallback(){}show(n,i,...r){let u=t(this),f=`<span class="title">${i}</span><span class="msg">${n}</span><b class="close">x</b>`;u.html(f);u.removeClass().addClass("msgshow");r&&u.addClass(...r);u.html(f).find(".close")[0].onclick=()=>{this.clear()}}ok(n){let i=t(this),r=`<span class="title">✔ 成功</span><span class="msg">${n}</span><b class="close">x</b>`;i.html(r);i.removeClass().addClass("msgshow","bg-green-4");i.find(".close")[0].onclick=()=>{this.clear()}}info(n){let i=t(this),r=`<span class="title">i 提示</span><span class="msg">${n}</span><b class="close">x</b>`;i.html(r);i.removeClass().addClass("msgshow","bg-sky-4");i.find(".close")[0].onclick=()=>{this.clear()}}err(n){let i=t(this),r=`<span class="title">✖ 错误</span><span class="msg">${n}</span><b class="close">x</b>`;i.html(r);i.removeClass().addClass("msgshow","bg-red-4");i.find(".close")[0].onclick=()=>{this.clear()}}warn(n){let i=t(this),r=`<span class="title">⚠ 警示</span><span class="msg">${n}</span><b class="close">x</b>`;i.html(r);i.removeClass().addClass("msgshow","bg-orange-4");i.find(".close")[0].onclick=()=>{this.clear()}}clear(){this.innerHTML="";this.innerText="";t(this).addClass("d-none")}}))})(window);(n=>{const t=n.ns.domHelp;n.customElements.define("m-mnavmenu",(class extends HTMLElement{constructor(){super();t(this).addClass("mnavmenu")}connectedCallback(){}create(n){t(this).find(".mnavmenu-label").each(n=>{n.onclick=()=>{let i=".mnavmenu-itembox",r=t(n).prev(i).hasClass("close");t(this).find(i).addClass("close");r==!0&&t(n).prev(i).removeClass("close")}});t(this).find(".mnavmenu-item,.mnavmenu-menu").each((i,r)=>{i.onclick=()=>{t(i).parent(".mnavmenu").find(".mnavmenu-itembox").addClass("close"),typeof n=="function"&&n(i,r)}})}activeItem(n){let i=t(this).find(".mnavmenu-item,.mnavmenu-menu")[n];i.click()}}))})(window);(n=>{const t=n.ns.domHelp;let i=n=>{let i=t.fragment();i.append(t("<a>").addClass("back")[0]);i.append(t("<span>").addClass("title","text-overflow")[0]);i.append(t("<a>")[0]);t(n).append(i).addClass("mdirbar")},r=(n,r)=>{if(!n)throw"必须传入barDom,contDom容器对象";let u={};u.barDom=n;u.contDom=r;u.cache=[];i(u.barDom);u.load=(n,i,h)=>{if(s(n)==!0){typeof h=="function"&&h(1);return}let c=o(n);if(c>-1){e();let n=u.cache[c];t(r).html(n.dom);f(n.title);u.cache.splice(c,1);n.dom=null;u.cache.push(n);typeof h=="function"&&h(2);return}u.cache.length>0&&e();u.cache.push({pid:n,title:i,dom:null});f(i);typeof h=="function"&&h(3)};let s=n=>{let t=o(n);return t==-1?!1:u.cache[t].dom==null},e=()=>{for(var n=0,i=u.cache.length;n<i;n++)if(u.cache[n].dom==null){u.cache[n].title=f();u.cache[n].dom=t.fragment(...u.contDom.childNodes);return}},o=n=>{for(var t=0,i=u.cache.length;t<i;t++)if(u.cache[t].pid==n)return t;return-1},f=i=>{if(!i)return t(n).find(".title").text();t(n).find(".title").text(i)};return u.back=n=>{let r=u.cache.length-2;if(r<0){typeof n=="function"&&n(-1);return}u.cache.pop();let i=u.cache[r];t(u.contDom).html(i.dom);f(i.title);i.dom=null;typeof n=="function"&&n(0)},t(n).find(".back")[0].onclick=u.back,u};n.ns.mdirbar=r})(window);(n=>{const t=n.ns.domHelp;n.customElements.define("m-range",(class extends HTMLElement{constructor(){super();this._min;this._max;this._val=0;this._barLen=0;this._mStart={x:0,y:0};this._btnBegin={x:0,y:0};this._rBtn;this._rTxt;this._rBar;this._changeFun;this._init()}connectedCallback(){}get Value(){return this._val}set Value(n){let t=parseInt(n)||0;t<this._min?t=this._min:t>this._max&&(t=this._max);let i=t/this._max*this._barLen;this._rTxt.style.marginLeft=i+"px";this._rBar.style.borderLeftWidth=i+"px";this._val=t;this._rTxt.innerText=t}set onChange(n){typeof n=="function"&&(this._changeFun=n)}_init(){t(this).addClass("range-box");let n=parseInt(this.getAttribute("width"))||320;this._barLen=n-20;this.style.width=n+"px";this.innerHTML='<span class="range-txt"><\/span><div class="range-bar"><span class="range-btn"><\/span><\/div>';this._rBtn=this.querySelector(".range-btn");this._rTxt=this.querySelector(".range-txt");this._rBar=this.querySelector(".range-bar");this._min=parseInt(this.getAttribute("min"))||0;this._max=parseInt(this.getAttribute("max"))||100;this._min>this._max&&(this._min=0,this._max=100);this.Value=parseInt(this.getAttribute("val"));this._bindEvent()}_bindEvent(){this.addEventListener("mousedown",n=>{n.stopPropagation(),n.preventDefault(),this._start(n.x)});this.addEventListener("mousemove",n=>{n.stopPropagation(),n.preventDefault(),n.buttons==1&&this._move(n.x)});this.addEventListener("mouseup",n=>{n.stopPropagation(),n.preventDefault(),this._end()});this.addEventListener("touchstart",n=>{n.stopPropagation();n.preventDefault();let t=n.targetTouches[0];this._start(t.pageX)});this.addEventListener("touchmove",n=>{n.stopPropagation();n.preventDefault();let t=n.targetTouches[0];this._move(t.pageX)});this.addEventListener("touchend",n=>{n.stopPropagation(),n.preventDefault(),this._end()})}_start(n){this._mStart.x=n;this._btnBegin.x=parseInt(this._rBar.style.borderLeftWidth.replace("px",""))||0;t(this._rBtn).addClass("active")}_move(n){let i=this._barLen,r=n-this._mStart.x,t=this._btnBegin.x+r;t<0?t=0:t>i&&(t=i);this._rTxt.style.marginLeft=t+"px";this._rBar.style.borderLeftWidth=t+"px";this._val=parseInt(t/i*this._max);this._rTxt.innerText=this._val;this._changeFun&&this._changeFun(this._val)}_end(){t(this._rBtn).removeClass("active")}}))})(window);(n=>{const t=n.ns.domHelp;n.customElements.define("m-inputwatch",(class extends HTMLInputElement{constructor(){super()}connectedCallback(){}init(n,t){this.changeE=n;this.timeout=t||1e3;this.stopListen=0;this.zhTyping=0;let i=()=>{this.stopListen=1,this.lastValue=this.value,this.watch()},r=()=>{this.stopListen=0},u=()=>{this.zhTyping=1},f=()=>{this.zhTyping=0};this.addEventListener("focus",i);this.addEventListener("blur",r);this.addEventListener("compositionstart",u);this.addEventListener("compositionend",f)}watch(){if(this.stopListen!=0){let n=this.value.replace(/^\s*|\s*$/g,"");this.zhTyping==0&&n!=this.lastValue&&(this.lastValue=n,typeof this.changeE=="function"&&this.changeE(n,this));setTimeout(()=>{this.watch()},this.timeout)}}}),{"extends":"input"})})(window)