<div class=doc-page><h2>监听输入</h2><p>使用自定义标记 &lt;m-inputwatch><p>&lt;m-inputwatch>扩展自原生 input 标记,dom插入时仍然是 input.但是关键属性是 <strong>is="m-inputwatch"</strong> 这个表示 m-inputwatch 自定义标记是扩展自 input 的.<pre>
&lt;input class="input-text" <strong>is="m-inputwatch"</strong> type="text" value="" id="inputvalchange1"/>
</pre><p>工作方式是,定时检测input输入框的值的变化,检测到变化时,执行一个方法.<p>在获取焦点时触发监听,失去焦点时结束监听.定时器负责监听,如果发生变化,执行一个方法.<p>使用场景,当输入内容发生变化时,提示与输入内容相关的数据.类似于搜索框的自动提示功能.<p>对于中文输入时的状态问题,会监听compositionstart,compositionend两个事件,避免在中文输入过程中触发判断.<h4>属性</h4><p><b class=txt-sky-4>input1.timeOut=1000毫秒</b> 监听事件间隔.默认1000毫秒.<h4>方法</h4><p><b class=txt-sky-4>input1.watch()</b> 开始监听.无需调用,在input获得焦点时,会自动触发监听,调用这个方法.<h4>事件</h4><p><b class=txt-sky-4>input1.onChange=handle(val,input)</b> 监听到变化时,执行的方法.val: 当前input值, input: input的dom对象<h4>测试</h4><p>以下测试输入一个字,筛选出包含这个字的结果<div class="grid grid-15p a-center gap-col-10"><label class="form-label bg-sky-4">搜索关键字</label><input class=input-text is=m-inputwatch type=text name=name value="" id=inputvalchange1></div><div class="grid grid-15p mg-t-10 a-center gap-col-10"><label class="form-label bg-green-4">搜索结果</label><div class="bd-1 bd-green-4" id=alldatabox></div></div></div><script>(()=>{function t(n){for(var i="",t=0;t<n.length;t++)i+='<span class="label mg-5">'+n[t]+"<\/span>";document.getElementById("alldatabox").innerHTML=i}var n=["苹果","手机","笔记本电脑","电脑","安卓","手游","老干妈","苹果酱","安全","老子","干货","水果","电磁场","旅游","山川河流","头脑","黄金","白金","黄帝","白色","白头山"];t(n);let i=document.getElementById("inputvalchange1");i.onChange=i=>{let u=[];for(var r=0;r<n.length;r++)n[r].indexOf(i)>-1&&u.push(n[r]);t(u)}})()</script>